var regionloadWait,ReturnVal,SpinnerTimeout,origshowSpinner=apex.util.showSpinner,messageKey="ASWMessages",inputDateFormat=get_global_ind_values("AI_INPUT_DATE_FORMAT"),jsDateFormat=get_global_ind_values("AI_JS_DATE_FORMAT");function disable_item(e,a){var t;t=""!=e?"#"+e:"."+a,$(t).addClass("apex_disabled")}function enable_item(e,a){var t;t=""!=e?"#"+e:"."+a,$(t).removeClass("apex_disabled")}function addLoadingIndicator(){regionloadWait=apex.widget.waitPopup()}function removeLoadingIndicator(e){void 0!==e&&e.remove()}function page_edit_access(e){"N"==e&&($("input:radio[name*='_ig_toolbar_']").addClass("asw_always_on"),$(".a-Toolbar-input").addClass("asw_always_on"),$("input").not(".asw_always_on").datepicker("disable"),$("button.ui-multiselect").not(".asw_always_on").addClass("apex_disabled"),$("input:checkbox").not(".asw_always_on,.a-IG-controlsCheckbox").closest("div").addClass("apex_disabled"),$("input:checkbox").parents("div.asw_always_on").find("input:checkbox").closest("div").removeClass("apex_disabled"),$("input:radio").not(".asw_always_on").closest("div").addClass("apex_disabled"),$("input:radio").parents("div.asw_always_on").find("input:radio").closest("div").removeClass("apex_disabled"),$("div.asw_always_on").find("input:checkbox").prop("disabled",""),$("div.asw_always_on").find("input:radio").prop("disabled",""),$("textarea").not(".asw_always_on").addClass("apex_disabled"),$("ul.apex-item-multi").addClass("apex_disabled"),$("ul.apex-item-multi").parents("div.asw_always_on").find("ul.apex-item-multi").removeClass("apex_disabled"),$("button.a-Button--popupLOV").addClass("apex_disabled"),$("button.a-Button--popupLOV").parent().addClass("apex_disabled"),$("button.a-Button--popupLOV").parents("div.asw_always_on").find("button.a-Button--popupLOV").removeClass("apex_disabled"),$("button.a-Button--popupLOV").parents("div.asw_always_on").find("button.a-Button--popupLOV").parent().removeClass("apex_disabled"),$("oj-input-date").not(".asw_always_on").addClass("apex_disabled"),$("input, select").not("div .a-IRR-searchFieldContainer input").not("div .a-IRR-savedReports").not("div .a-IRR-sortWidget-search").not("div .a-IRR-sortWidget-search input").not(".asw_always_on").not(".a-IRR-selectList").not("div .asw_always_on input").not("div .asw_always_on select").not(".a-Toolbar-inputText").not(".a-Toolbar-selectList").not(".u-TF-item--select").addClass("apex_disabled")),$("label.t-Form-label").css("cursor","default").css("pointer-events","none"),$(".apex_disabled").bind("keydown",(function(e){return!1}))}function getSelectionStart(e){if(e.createTextRange){var a=document.selection.createRange().duplicate();return a.moveEnd("character",e.value.length),""==a.text?e.value.length:e.value.lastIndexOf(a.text)}return e.selectionStart}function numbersonly(e){var a=e.charCode?e.charCode:e.keyCode;if(8!=a||46!=a)return!(a<48||a>57)}function alert(e){apex.message.alert(e)}function confirm(e,a,t,n,o,s,i){apex.lang.addMessages({"APEX.DIALOG.OK":a,"APEX.DIALOG.CANCEL":t}),apex.message.confirm(e,(function(e){e?"function"==typeof n?n():""!=s&&void 0!==s&&apex.submit(s):"function"==typeof o?o():""!=i&&void 0!==i&&apex.submit(i)})),setTimeout((function(){var e=$(".ui-dialog-buttonpane button");2===e.length&&e.eq(0).before(e.eq(1))}),25)}function isNumberKeyWithNegative(e){var a=e.charCode?e.charCode:e.keyCode;return 8==a||45==a||!(a<48||a>57||46==a)}function isNumberKeyWithDot(e){var a=e.which?e.which:event.keyCode;return a>=48&&57>=a||46==a||8==a}function ValidateDate(e,a){return moment(e,[""+a],!0).isValid()}function openInlineDialog(e,a,t){try{if(t&&$.isNumeric(t)){var n=(screen.height*(t/100)).toFixed(0);$("#"+e).hasClass("js-regionPopup")?$("#"+e).popup({height:n}):$("#"+e).dialog({height:n})}if(a&&$.isNumeric(a)){var o=(screen.width*(a/100)).toFixed(0);$("#"+e).hasClass("js-regionPopup")?$("#"+e).popup({width:o}):$("#"+e).dialog({width:o})}apex.theme.openRegion(e)}catch(e){console.log(e)}}function closeInlineDialog(e){try{apex.theme.closeRegion(e)}catch(e){console.log(e)}}function get_global_ind_values(e){var a;return apex.server.process("GET_GLOBAL_IND_VAL",{x01:e},{dataType:"text",async:!1,success:function(e){a=e}}),a}function get_message(e,a,t,n){return SetAllMessages(),apex.lang.getMessage(e).replace("%s1",a).replace("%s2",t).replace("%s3",n)}function clob2Array(e,a,t){loopCount=Math.floor(e.length/a)+1;for(var n=0;n<loopCount;n++)t.push(e.slice(a*n,a*(n+1)));return t}function SetAllMessages(){var e=sessionStorage.getItem(messageKey);void 0===e||null==e||"null"==e?apex.server.process("GET_ALL_MESSAGES",{},{dataType:"text",async:!1,success:function(a){e=a,sessionStorage.setItem(messageKey,e),apex.lang.addMessages(JSON.parse(e))}}):apex.lang.addMessages(JSON.parse(e))}function DeleteAllMessages(){sessionStorage.removeItem(messageKey)}function binaryArray2base64(e){for(var a="",t=new Uint8Array(e),n=t.byteLength,o=0;o<n;o++)a+=String.fromCharCode(t[o]);return btoa(a)}async function upload_files(e,a,t,n,o){var s,i=document.getElementById(e),r=new FileReader;s=void 0===a||""==a?0:a;var l,d=i.files[s];r.onload=(l=d,function(a){if(l){var r,c,p=binaryArray2base64(a.target.result);r=apex.server.chunk(p),Array.isArray(r)||(r=[r]),c=0==s&&"N"!==o?"Y":"N",apex.server.process("AX_UPLOAD_FILES",{x01:d.name,x02:d.type,x03:c,f01:r},{dataType:"json",success:function(a){"success"==a.result?++s<i.files.length?upload_files(e,s,t,n):(s=0,i.value="","function"==typeof t&&t()):(apex.message.clearErrors(),apex.message.showErrors([{type:"error",location:["page"],message:a.error,unsafe:!1}]),"function"==typeof n&&n()),removeLoadingIndicator(regionloadWait)}})}}),i.files.length>0?r.readAsArrayBuffer(d):console.log("Nothing to read")}function mass_upld_file(e,a){upload_files(e,0,(function(){apex.server.process("MASS_UPLD_UPLOAD_FILE",{x01:a},{dataType:"json",success:function(e){console.log(e),apex.message.clearErrors(),"success"==e.result?(apex.message.showPageSuccess("&IMP_SUCCESS_MSG."),apex.region("ig_buffer_stock").refresh()):"download"==e.result?(apex.message.showErrors({type:"error",location:"page",message:get_message("IMPORT_RECORD_FAILURE"),unsafe:!1}),apex.navigation.redirect(e.redirectURL)):apex.message.showErrors([{type:"error",location:["page"],message:e.error,unsafe:!1}])},loadingIndicatorPosition:"page"})}))}function appendToDialogTitle(e,a,t){var n=apex.util.getTopApex().jQuery("."+e+" .ui-dialog-title").text();n.indexOf(a)>-1&&(n=n.substr(0,n.indexOf(a))),apex.util.getTopApex().jQuery("."+e+" .ui-dialog-title").text(n+t)}function invoke_click(e,a){$("["+e+"="+a+"]").click()}function openFilePicker(e){$("#"+e+"_input").click()}function addDownloadXLSXIcon(e,a,t){$("body").on("dialogopen",(function(n,o){if($("div.a-IRR-dialog span.ui-dialog-title").text()===apex.lang.getMessage("APEXIR_DOWNLOAD")){var s=$(n.target),i=s.attr("id").match(/(.+)_dialog_js/)[1],r=new RegExp(e,"g");e&&null==i.match(r)||(s.find("table.a-IRR-dialogTable tbody td a").closest("tr").append('<td nowrap="nowrap"><a href="javascript:get_ir_xlsx(\''+a+'\')"><img src="'+t+'ws/download_xls_64x64.gif" alt="XLSX" title="XLSX"></a></td>'),s.find("table.a-IRR-dialogTable tbody td span").closest("tr").append('<td align="center" nowrap="nowrap"><span>XLSX</span></td></tr>'),s.find("table.a-IRR-dialogTable tbody tr td a").closest("tr").find("td:last-child").prev().remove(),s.find("table.a-IRR-dialogTable tbody tr tr td span").closest("tr").find("td:last-child").prev().remove())}}))}function get_ir_xlsx(e){apex.server.process("PREPARE_XLSX_URL",{x01:$("#pFlowId").val(),x02:$("#pFlowStepId").val(),x03:$("#pInstance").val(),x04:$("#pdebug").val(),x05:"IR["+e+"]_XLSX"},{dataType:"text",success:function(e){apex.navigation.redirect(e)}})}$(document).on("keypress",".numeric_list",(function(e){numbersonly(e)||e.preventDefault()})),$(document).on("keypress",".numeric_list_with_negative",(function(e){isNumberKeyWithNegative(e)||e.preventDefault()})),$(document).on("keypress",".numeric_list_with_dot",(function(e){isNumberKeyWithDot(e)||e.preventDefault()})),$(document).on("keypress",".non_numeric_list",(function(e){var a=new RegExp("^[0-9 \b]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);46==(e.which||e.keyCode)&&e.preventDefault(),a.test(t)&&e.preventDefault()})),$(document).on("keypress",".non_numeric_withoutspace_list",(function(e){var a=new RegExp("^[0-9 \b]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);if(46==(e.which||e.keyCode))return!0;a.test(t)&&e.preventDefault()})),$(document).on("keypress",".only_alpha_list",(function(e){var a=new RegExp("^[0-9 \b `~!@#$%^&*()-_+={};:'?/.><, |\"\\[]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);a.test(t)&&e.preventDefault()})),$(document).on("keypress",".alpha_with_space_list",(function(e){var a=new RegExp("^[ a-zA-Zs\b]*$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);return 46==(e.which||e.keyCode)||(!!a.test(t)||(e.preventDefault(),!1))})),$(document).on("keypress",".alpha_without_special",(function(e){var a=new RegExp("^[A-Za-z0-9_\b]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);return 46==(e.which||e.keyCode)||(!!a.test(t)||(e.preventDefault(),!1))})),$(document).on("keypress",".alphanumeric_with_space",(function(e){var a=new RegExp("^[ A-Za-z0-9\b]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);return 46==(e.which||e.keyCode)||(!!a.test(t)||(e.preventDefault(),!1))})),$(document).on("keypress",".only_alpha_list_without_space",(function(e){var a=new RegExp("^[0-9 `~!@#$%^&*()-_+={};:'?/.><, |\"\\[]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);46!=(e.which||e.keyCode)&&a.test(t)&&e.preventDefault()})),$(document).on("keypress",".only_alpha_list_with_space",(function(e){var a=new RegExp("^[0-9`~!@#$%^&*()-_+={};:'?/.><,|\"\\[]+$"),t=String.fromCharCode(e.charCode?e.charCode:e.which);46!=(e.which||e.keyCode)&&a.test(t)&&e.preventDefault()})),$(".numeric_pos_neg_list").on("input",(function(){this.value=this.value.replace(/(?!^-)[^0-9.]/g,"").replace(/(\..*)\./g,"$1")})),$(document).on("change",".apex-item-datepicker-jet",(function(e){console.log(this);var a=apex.item(this.id).getValue(),t=$(this).attr("time-picker.time-increment");if(null!==a&&""!==a&&!t)if(ValidateDate(a,inputDateFormat)){var n=moment(a.replace(/\\/g,""),inputDateFormat).format(jsDateFormat);apex.item(this.id).setValue(n)}else ValidateDate(a,jsDateFormat)||(apex.item(this.id).setValue(""),alert(get_message("INVALID_INPUT_DATE_FORMAT",inputDateFormat)))}));