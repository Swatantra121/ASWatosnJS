function crushItem(e,r,o,t,i,n,d,s,I="N"){try{var h=[],f=g_pog_json[e].ModuleInfo[r],u=g_pog_json[e].ModuleInfo[r].ShelfInfo[o];if("Y"==I&&void 0!==g_json[0]&&g_json.length>0)if(void 0!==g_json[0].ModuleInfo[r].ShelfInfo[o])var C=g_json[0].ModuleInfo[r].ShelfInfo[o];else C=g_pog_json[e].ModuleInfo[r].ShelfInfo[o];var m=g_pog_json[e].ModuleInfo[r].ShelfInfo[o].ItemInfo[t],a=void 0===m?-1:m.Orientation,[p,l,H,g,_,x]=get_new_orientation_dim(a,0,0,0),Y="N",W="N",S=0,D=0;if(-1!==t&&void 0!==m&&(m.CrushVert>0&&"0"==m.CapStyle&&0==m.NVal&&("H"==i||"A"==i)&&(m.H=m.RH),m.CrushD>0&&("D"==i||"A"==i)&&(m.D=m.RD),Y=void 0===m.MVertCrushed||null==m.MVertCrushed||"N"==m.MVertCrushed?"N":"Y","H"==g?D="N"==Y?m.CHPerc:m.CrushVert:"W"==g?D="N"==Y?m.CWPerc:m.CrushHoriz:"D"==g&&(D="N"==Y?m.CDPerc:m.CrushD),W=void 0===m.MHorizCrushed||null==m.MHorizCrushed||"N"==m.MHorizCrushed?"N":"Y","H"==_?S="Y"==m.MassCrushH?m.CrushHoriz:"N"==W?m.CHPerc:m.CrushVert:"W"==_?S="N"==W?m.CWPerc:m.CrushHoriz:"D"==_&&(S="N"==W?m.CDPerc:m.CrushD)),s.length>0){var c=0;for(idx of s){var N=0;for(obj of g_pog_json[e].ModuleInfo[r].ShelfInfo[o].ItemInfo)obj.CrushD>0&&("D"==i||"A"==i)&&N==s[c]&&(obj.D=obj.RD),N++;c++}}var v=0;if((v="PEGBOARD"==u.ObjType?u.VertiSpacing:u.HorizGap)>0?v:0,void 0!==m&&"CHEST"==u.ObjType&&"Y"==g_chest_as_pegboard&&("Y"==u.AllowAutoCrush||"Y"==u.ManualCrush)){var w="Y";if("H"!=i&&"A"!=i&&"W"!=i||(w=crushChestItemHW("Y"==I&&void 0!==C?C:u,m,t,D,S,W,Y,g,_,n)),"D"==g){var M=m.CrushVert,F=m.CHPerc,z=m.MVertCrushed;We=(void 0===m.MVertCrushed||"N"==m.MVertCrushed)&&F>0?F:M}else{var P=m.CrushD,j=m.CDPerc;z=m.MDepthCrushed;We=(void 0===m.MDepthCrushed||"N"==m.MDepthCrushed)&&j>0?j:P}if(("D"==i||"A"==i)&&m.D>u.BsktWallH||"Y"==z){m.D=m.RD;var V=0,y=m.RD,R="N",O=m.D;if(We>0)if("N"==z){for(B=0;B<=We;B++)if((O=wpdSetFixed(y-y*B/100))<=u.BsktWallH){V=B,R="Y";break}}else(O=wpdSetFixed(y-y*We/100))<=u.BsktWallH&&(V=We,R="Y");"Y"==R&&"Y"==n?(m.D=wpdSetFixed(O),"W"==x?m.CrushHoriz=V:"H"==x?m.CrushVert=V:"D"==x&&(m.CrushD=V),m.DChanged="Y",g_error_category="",w="Y"):("Y"==z&&(m.D=wpdSetFixed(O),"W"==x?m.CrushHoriz=V:"H"==x?m.CrushVert=V:"D"==x&&(m.CrushD=V),m.DChanged="Y"),g_error_category="D",w="N")}return w}if("CHEST"!=u.ObjType||"Y"!=g_chest_as_pegboard){w="Y";if("H"==i||"A"==i){V=0;var b=0,X=0,A=m.RH;if("Y"==I&&void 0!==g_json[0])var k=get_onload_max_merch(r,o,f,u,g_dft_max_merch,0,g_json);else k=get_cap_max_merch(r,o,f,u,e,g_dft_max_merch);if("1"!=m.CapStyle&&"2"!=m.CapStyle&&"3"!=m.CapStyle||(X=m.H-m.RH,A=m.RH+nvl(X)),"N"==Y){for(re=0;re<=D;re++)if(k>=(b=A-A*re/100)){V=re;break}}else b=A-A*D/100,V=D;if(void 0!==m.TopObjID&&""!==m.TopObjID||void 0!==m.BottomObjID&&""!==m.BottomObjID){var T=m.H,B=0;for(const e of u.ItemInfo)wpdSetFixed(m.X)==wpdSetFixed(e.X)&&B!==t&&(T+=e.H),B++;b=T}if(b>k)g_error_category="H",w="N","N"==Y&&("H"==g?m.CrushVert=0:"W"==g?m.CrushHoriz=0:"D"==g&&(m.CrushDepth=0));else{if("Y"==n){m.H=b,"H"==g?m.CrushVert=V:"W"==g?m.CrushHoriz=V:"D"==g&&(m.CrushDepth=V);var[E,G]=get_item_xy(u,m,m.W,m.H,e);"BASKET"==u.ObjType&&"DIVIDER"==m.Item||(m.Y=G),m.HChanged="Y"}g_error_category="",w="Y"}}if("W"==i||"A"==i){var K="N",L=0,q=[],J=[],Q=0,U="N";V=0;if(g_combinedShelfs.length>0){var[Z,$]=getCombinationShelf(e,u.Shelf);if(-1!==Z&&(K="Y",g_combinedShelfs[Z][0].AllowAutoCrush),"Y"==K){var ee=g_combinedShelfs[Z].ItemInfo,re=0;for(var oe of g_combinedShelfs[Z])L+=oe.W,re++}}if("Y"==K){re=0,U="N",h=[];var te=[],ie=[],ne=[],de=(q=[],[]);J=[];for(const e of ee){var se=0,[p,l,H,Ie,_,he]=(a=e.Orientation,get_new_orientation_dim(a,0,0,0));z=void 0===e.MHorizCrushed||null==e.MHorizCrushed||"N"==e.MHorizCrushed?"N":"Y","W"==_?se="N"==z&&e.CWPerc>0?e.CWPerc:e.CrushHoriz:"H"==_?se="N"==z&&e.CHPerc>0?e.CHPerc:e.CrushVert:"D"==_&&(se="N"==z&&e.CDPerc>0?e.CDPerc:e.CrushD),"N"==e.Fixed&&se>0&&("Y"==z&&re!==t||"N"==z)&&(U="Y",h.push(e.IIndex),ie.push(e.SIndex),ne.push(e.MIndex),te.push(e.MIndex+"#"+e.SIndex+"#"+e.IIndex),q.push(e.W),de.push(z),J.push(se)),re++}if("Y"==U){for(U="N",re=0;re<100;re++){Q=0;var fe=0,ue=(B=0,"N");for(const r of ee){se=0,a=r.Orientation;var[p,l,H,Ie,_,he]=get_new_orientation_dim(a,0,0,0);if(z=void 0===r.MHorizCrushed||null==r.MHorizCrushed||"N"==r.MHorizCrushed?"N":"Y",void 0===(se=J[te.indexOf(r.MIndex+"#"+r.SIndex+"#"+r.IIndex)])&&("W"==_?se="N"==z&&r.CWPerc>0?r.CWPerc:r.CrushHoriz:"H"==_?se="N"==z&&r.CHPerc>0?r.CHPerc:r.CrushVert:"D"==_&&(se="N"==z&&r.CDPerc>0?r.CDPerc:r.CrushD)),-1!==te.indexOf(r.MIndex+"#"+r.SIndex+"#"+r.IIndex)&&re<=se&&"N"==z)if((fe=wpdSetFixed(r.RW-r.RW*(re/100)))>=wpdSetFixed(r.RW-r.RW*(se/100))){if(Q+=fe,"Y"==n)if(void 0!==g_pog_json[e].ModuleInfo[r.MIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex])(Ce=g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex]).W=fe,"W"==_?Ce.CrushHoriz=re:"H"==_?Ce.CrushVert=re:"D"==_&&(Ce.CrushD=re);else r.W=fe,"W"==_?r.CrushHoriz=re:"H"==_?r.CrushVert=re:"D"==_&&(r.CrushD=re)}else Q+=r.RW;else if("Y"==z){if(ue=se>0?"Y":"N",Q+=fe=wpdSetFixed(r.RW-r.RW*(se/100)),"Y"==n)if(void 0!==g_pog_json[e].ModuleInfo[r.MIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex])(Ce=g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex]).W=fe,"W"==_?Ce.CrushHoriz=se:"H"==_?Ce.CrushVert=se:"D"==_&&(Ce.CrushD=se);else r.W=fe,"W"==_?r.CrushHoriz=se:"H"==_?r.CrushVert=se:"D"==_&&(r.CrushD=se)}else{if(0==se)if(void 0!==g_pog_json[e].ModuleInfo[r.MIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex]&&void 0!==g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex]){var Ce=g_pog_json[e].ModuleInfo[r.MIndex].ShelfInfo[r.SIndex].ItemInfo[r.IIndex];"W"==_?Ce.CrushHoriz=0:"H"==_?Ce.CrushVert=0:"D"==_&&(Ce.CrushD=0)}else"W"==_?r.CrushHoriz=0:"H"==_?r.CrushVert=0:"D"==_&&(r.CrushD=0);Q+=r.W}v>0&&(Q+=r.SpreadItem),B++}if(L-Q>=0){V=re,(re>0||"Y"==ue)&&(U="Y",-1!==t&&-1!==h.indexOf(t)&&"Y"==n&&(u.ItemInfo[t].WChanged="Y"));break}}if("N"==U){if(V>0){B=0;for(const r of h)"N"==de[B]&&void 0!==g_pog_json[e].ModuleInfo[ne[B]]&&void 0!==g_pog_json[e].ModuleInfo[ne[B]].ShelfInfo[ie[B]]&&void 0!==g_pog_json[e].ModuleInfo[ne[B]].ShelfInfo[ie[B]].ItemInfo[h[B]]&&(g_pog_json[e].ModuleInfo[ne[B]].ShelfInfo[ie[B]].ItemInfo[h[B]].W=q[B],g_pog_json[e].ModuleInfo[ne[B]].ShelfInfo[ie[B]].ItemInfo[h[B]].CrushHoriz=J[B]),B++}g_error_category="W",w="N"}else g_error_category="",w="Y"}else"Y"==W&&"N"==U&&void 0!==m?(ae=wpdSetFixed(m.RW-m.RW*(S/100)),"Y"==n&&(m.W=ae,m.WChanged="Y","W"==_?m.CrushHoriz=S:"H"==_?m.CrushVert=S:"D"==_&&(m.CrushD=S))):w="F"}else{ee=u.ItemInfo,re=0,U="N",h=[],q=[],de=[],J=[];var me=!1;for(const e of ee){se=0,a=e.Orientation;var[p,l,H,Ie,_,he]=get_new_orientation_dim(a,0,0,0);z=void 0===e.MHorizCrushed||null==e.MHorizCrushed||"N"==e.MHorizCrushed?"N":"Y","W"==_?se="N"==z&&e.CWPerc>0?e.CWPerc:e.CrushHoriz:"H"==_?se="N"==z&&e.CHPerc>0?e.CHPerc:e.CrushVert:"D"==_&&(se="N"==z&&e.CDPerc>0?e.CDPerc:e.CrushD),"N"==e.Fixed&&se>0?(U="Y",h.push(re),q.push(e.W),de.push(z),J.push(se)):"Y"==e.Fixed&&(me=!0),re++}if("Y"==I)ee=C.ItemInfo;else ee=u.ItemInfo;if("Y"!=U||me)if("Y"==U&&me)w=widthCrushItemWithFixedDivider(e,r,o,t,n);else if("Y"==W&&"N"==U){var ae=m.RW-m.RW*(S/100);"Y"==n&&(m.W=ae,m.WChanged="Y",m.CrushHoriz=S)}else w="F";else{for(U="N",re=0;re<100;re++){Q=0;fe=0,B=0,ue="N";for(const e of ee){se=0,a=e.Orientation;var[p,l,H,Ie,_,he]=get_new_orientation_dim(a,0,0,0);if(z=void 0===e.MHorizCrushed||null==e.MHorizCrushed||"N"==e.MHorizCrushed?"N":"Y","W"==_?se="N"==z&&e.CWPerc>0?e.CWPerc:e.CrushHoriz:"H"==_?se="N"==z&&e.CHPerc>0?e.CHPerc:e.CrushVert:"D"==_&&(se="N"==z&&e.CDPerc>0?e.CDPerc:e.CrushD),-1!==h.indexOf(B)&&re<=se){var pe=void 0!==e.RW&&null!==e.RW?e.RW:e.W;"N"==z?(fe=wpdSetFixed(pe-pe*(re/100)))>=wpdSetFixed(pe-pe*(se/100))?(Q+=fe,"Y"==n&&(u.ItemInfo[B].W=fe,"W"==_?u.ItemInfo[B].CrushHoriz=re:"H"==_?u.ItemInfo[B].CrushVert=re:"D"==_&&(u.ItemInfo[B].CrushD=re))):Q+=pe:"Y"==z&&(ue=se>0?"Y":"N",Q+=fe=wpdSetFixed(pe-pe*(se/100)),"Y"==n&&(u.ItemInfo[B].W=fe,"W"==_?u.ItemInfo[B].CrushHoriz=se:"H"==_?u.ItemInfo[B].CrushVert=se:"D"==_&&(u.ItemInfo[B].CrushD=se)))}else Q+=wpdSetFixed(e.W);v>0&&(Q+=e.SpreadItem),B++}if(u.W+u.ROverhang+u.LOverhang-Q>=0){V=re,(re>0||"Y"==ue)&&(U="Y",-1!==t&&-1!==h.indexOf(t)&&"Y"==n&&(u.ItemInfo[t].WChanged="Y"));break}}if("N"==U){B=0;if(V>0)for(const e of h)"N"==de[B]&&(u.ItemInfo[h[B]].W=q[B],u.ItemInfo[h[B]].CrushHoriz=J[B]),B++;g_error_category="W",w="N"}else g_error_category="",w="Y"}}}if("D"==i||"A"==i){var le=[],He=[],ge=[],_e=(U="N","N");if("Y"==I&&void 0!==g_json[0])var xe=onload_findNearByShelfMaxDepth(r,o,t,t,-1,0,g_json);else xe=findNearByShelfMaxDepth(r,o,t,t,-1,e);for(re=0;re<d.length;re++)_e=void 0===u.ItemInfo[s[re]].MDepthCrushed||"N"==u.ItemInfo[s[re]].MDepthCrushed?"N":"Y",(d[re]>u.D-xe||"Y"==_e)&&(le.push(d[re]),He.push(s[re]),ge.push(_e));var Ye=0,We=0;for(re=0;re<le.length;re++){a=u.ItemInfo[He[re]].Orientation;var[p,l,H,Ie,_,he]=get_new_orientation_dim(a,0,0,0);if("W"==he?We="N"==_e&&u.ItemInfo[He[re]].CWPerc>0?u.ItemInfo[He[re]].CWPerc:u.ItemInfo[He[re]].CrushHoriz:"H"==he?We="N"==_e&&u.ItemInfo[He[re]].CHPerc>0?u.ItemInfo[He[re]].CHPerc:u.ItemInfo[He[re]].CrushVert:"D"==he&&(We="N"==_e&&u.ItemInfo[He[re]].CDPerc>0?u.ItemInfo[He[re]].CDPerc:u.ItemInfo[He[re]].CrushD),We>0&&(d[re]>u.D-xe||"Y"==ge[re])){O=0,u.ItemInfo[He[re]].D,u.ItemInfo[He[re]].BaseD,y=u.ItemInfo[He[re]].RD;if("N"==ge[re]){for(B=0;B<=We;B++)if(O=y-y*B/100,u.D-xe>=O){h.push(He[re]),U="Y",Ye=B;break}}else O=y-y*We/100,h.push(He[re]),U="Y",Ye=We}}if("N"==U)for(re=0;re<d.length;re++)if(wpdSetFixed(u.ItemInfo[s[re]].D)!==wpdSetFixed(u.ItemInfo[s[re]].RD)){a=u.ItemInfo[s[re]].Orientation;var[p,l,H,Ie,_,he]=get_new_orientation_dim(a,0,0,0);"N"==_e&&("W"==he?u.ItemInfo[s[re]].CrushHoriz=0:"H"==he?u.ItemInfo[s[re]].CrushVert=0:"D"==he&&(u.ItemInfo[s[re]].CrushD=0))}if("Y"==U&&d.length==h.length&&"Y"==n){for(re=0;re<h.length;re++){O=u.ItemInfo[h[re]].RD-u.ItemInfo[h[re]].RD*(Ye/100);u.ItemInfo[h[re]].D=O,u.ItemInfo[h[re]].CrushD=Ye}-1!==t&&(u.ItemInfo[t].DChanged="Y"),g_error_category="",w="Y"}else g_error_category="D",w="N"}return w}}catch(e){throw error_handling(e),e}}function checkChestCrushedItemHit(e,r,o,t,i,n){try{var d=0,s=wpdSetFixed(e-o/2),I=wpdSetFixed(e+o/2),h=wpdSetFixed(r+t/2),f=wpdSetFixed(r-t/2);const p=wpdSetFixed(i.X-i.W/2),l=wpdSetFixed(i.X+i.W/2),H=wpdSetFixed(i.Y-i.H/2),g=wpdSetFixed(i.Y+i.H/2);for(const e of i.ItemInfo){if(d!==n){var u=wpdSetFixed(e.X-e.W/2),C=wpdSetFixed(e.X+e.W/2),m=wpdSetFixed(e.Y+e.H/2),a=wpdSetFixed(e.Y-e.H/2);if(h<a||f>m||I<u||s>C){if(h>g||f<H||s<p||I>l)return"Y"}else if(h>a&&a>f&&!(f<m&&m<h)&&(s<C&&C<I||I>u&&u>s)||!(h>a&&a>f)&&f<m&&m<h&&(s<C&&C<I||I>u&&u>s)||(h>a&&a>f||f<m&&m<h)&&!(s<C&&C<I)&&I>u&&u>s||(h>a&&a>f||f<m&&m<h)&&s<C&&C<I&&!(I>u&&u>s))return"Y"}d++}return"N"}catch(e){error_handling(e)}}function getChestOverlappedItemDimension(e,r,o,t,i){try{const _=wpdSetFixed(e-o/2),x=wpdSetFixed(e+o/2),Y=wpdSetFixed(r+t/2),W=wpdSetFixed(r-t/2);var n,d,s,I,h=0,f=0,u=0,C=0,m=0,a=0,p="N",l="N";"CHEST"==nvl(i.ObjType)?(n=wpdSetFixed(i.Y+i.H/2),d=wpdSetFixed(i.Y-i.H/2),s=wpdSetFixed(i.X-i.W/2),I=wpdSetFixed(i.X+i.W/2),Y>n&&(f=m=Y-n,l="Y"),W<d&&(f+=a=d-W,l="Y"),_<s&&(h=u=shelf_start-s,l="Y"),x>I&&(h+=C=x-I,l="Y")):(n=wpdSetFixed(i.Y+i.H/2),d=wpdSetFixed(i.Y-i.H/2),s=wpdSetFixed(i.X-i.W/2),I=wpdSetFixed(i.X+i.W/2),Y>d&&d>W&&!(W<n&&n<Y)&&(f=m=Y-d,p="Y"),W<n&&n<Y&&!(Y>d&&d>W)&&(f+=a=n-W,p="Y"),_<I&&I<x&&!(x>s&&s>_)&&(h=u=I-_,p="Y"),x>s&&s>_&&!(_<I&&I<x)&&(h+=C=x-s,p="Y"));const S=Math.ceil(h/o*100),D=Math.ceil(f/t*100),c=wpdSetFixed(o*(1-S/100)),N=wpdSetFixed(t*(1-D/100));var H=e,g=r;return 0!==S&&(H=C>u?"Y"==l?I-c/2:s-c/2:"Y"==l?s+c/2:I+c/2),0!==D&&(g=m>a?"Y"==l?n-N/2:d-N/2:"Y"==l?d+N/2:n+N/2),"Y"==p||"Y"==l?0==S&&0!==D?[e,g,o,N,0,D]:0!==S&&0==D?[H,r,c,t,S,0]:0!==S&&0!==D?"Y"==l?[H,g,c,N,S,D]:S>D?[e,g,o,N,0,D]:[H,r,c,t,S,0]:[e,r,o,t,0,0]:[e,r,o,t,0,0]}catch(e){error_handling(e)}}function crushChestItemHW(e,r,o,t,i,n,d,s,I,h){try{var f=0,u=r.RH+nvl(r.CapHeight),C=r.RW,m=r.X,a=r.Y,p=[],l=wpdSetFixed(m-C/2),H=wpdSetFixed(m+C/2),g=wpdSetFixed(a+u/2),_=wpdSetFixed(a-u/2);for(const r of e.ItemInfo)if(f!==o){var x=wpdSetFixed(r.X-r.W/2),Y=wpdSetFixed(r.X+r.W/2),W=wpdSetFixed(r.Y+r.H/2);g<wpdSetFixed(r.Y-r.H/2)||_>W||H<x||l>Y||p.push(r),f++}var S=wpdSetFixed(e.X-e.W/2),D=wpdSetFixed(e.X+e.W/2),c=wpdSetFixed(e.Y-e.H/2);(g>wpdSetFixed(e.Y+e.H/2)||_<c||l<=S||H>D)&&p.push(e);var[N,v,w,M]=[m,a,C,u],F=0,z=0;for(ovpItem of p)[N,v,w,M,itemWidthCrush,itemHeightCrush]=getChestOverlappedItemDimension(N,v,w,M,ovpItem),F+=itemWidthCrush,z+=itemHeightCrush;if("Y"==h){if(F<=i&&z<=t&&"N"==n&&"N"==d)return r.W=w,r.X=N,r.WChanged="Y","W"==I?r.CrushHoriz=F:"H"==I?r.CrushVert=F:"D"==I&&(r.CrushD=F),r.H=M,r.Y=v,r.HChanged="Y","H"==s?r.CrushVert=z:"W"==s?r.CrushHoriz=z:"D"==s&&(r.CrushD=z),g_error_category="","Y";if("Y"==n||"Y"==d){const h=wpdSetFixed(C-C*(i/100)),f=wpdSetFixed(u-u*(t/100));return"N"==checkChestCrushedItemHit(r.X,r.Y,"Y"==n?h:C,"Y"==d?f:r.H,e,o)?("Y"==n&&(r.W=h,r.WChanged="Y","W"==I?r.CrushHoriz=i:"H"==I?r.CrushVert=i:"D"==I&&(r.CrushD=i)),"Y"==d&&(r.H=f,r.HChanged="Y","H"==s?r.CrushVert=t:"W"==s?r.CrushHoriz=t:"D"==s&&(r.CrushD=t)),g_error_category="","Y"):(g_error_category="W","N")}return g_error_category="","Y"}return g_error_category="","Y"}catch(e){error_handling(e)}}function widthCrushItemWithFixedDivider(e,r,o,t,i){try{var n="Y",d=g_pog_json[e].ModuleInfo[r].ShelfInfo[o],s=d.ItemInfo,I=wpdSetFixed(d.X-d.W/2),h=wpdSetFixed(d.X+d.W/2),f=[],u=[],C=[],m=-1,a=-1,p=-1,l=0,H=0,g="N";for(item of s)"Y"==item.Fixed?(0==l?(a=wpdSetFixed(item.X+item.W/2),p=h,u.AvlSpace=p-a):(u.ItemInfo=C,C=[],0==H&&0==f.length?(a=I,p=wpdSetFixed(item.X-item.W/2),u.AvlSpace=p-a,f.push(u),u=[],H++):H>0?(a=s[m].X+s[m].W/2,p=wpdSetFixed(item.X-item.W/2),u.AvlSpace=p-a,f.push(u),u=[],H++):console.log(s,f,u,C)),m=l):(item.IIndex=l,C.push(item)),l==s.length-1&&("Y"!=item.Fixed?(u.ItemInfo=C,a=wpdSetFixed(s[m].X+s[m].W/2),p=h,u.AvlSpace=p-a,f.push(u),u=[],C=[]):0!==nvl(u)&&(p=wpdSetFixed(item.X-item.W/2),u.AvlSpace=p-a,f.push(u))),l++;for(partShelf of f){var _="N",x=[],Y=[],W=[],S=0;for(items of partShelf.ItemInfo){var D=0,c=items.Orientation,[N,v,w,M,F,z]=get_new_orientation_dim(c,0,0,0),P=void 0===items.MHorizCrushed||null==items.MHorizCrushed||"N"==items.MHorizCrushed?"N":"Y";"W"==F?D="N"==P&&items.CWPerc>0?items.CWPerc:items.CrushHoriz:"H"==F?D="N"==P&&items.CHPerc>0?items.CHPerc:items.CrushVert:"D"==F&&(D="N"==P&&items.CDPerc>0?items.CDPerc:items.CrushD),"N"==items.Fixed&&D>0&&(_="Y",x.push(items.IIndex),Y.push(items.W),W.push(P))}if("Y"==_){_="N";for(var j=0;j<100;j++){var V=0,y=0,R="N";for(items of partShelf.ItemInfo){D=0,c=items.Orientation;var[N,v,w,M,F,z]=get_new_orientation_dim(c,0,0,0);if(P=void 0===items.MHorizCrushed||null==items.MHorizCrushed||"N"==items.MHorizCrushed?"N":"Y","W"==F?D="N"==P&&items.CWPerc>0?items.CWPerc:items.CrushHoriz:"H"==F?D="N"==P&&items.CHPerc>0?items.CHPerc:items.CrushVert:"D"==F&&(D="N"==P&&items.CDPerc>0?items.CDPerc:items.CrushD),-1!==x.indexOf(items.IIndex)&&j<=D){var O=void 0!==items.RW&&null!==items.RW?items.RW:items.W;"N"==P?(y=wpdSetFixed(O-O*(j/100)))>=wpdSetFixed(O-O*(D/100))?(V+=y,"Y"==i&&(d.ItemInfo[items.IIndex].W=y,"W"==F?d.ItemInfo[items.IIndex].CrushHoriz=j:"H"==F?d.ItemInfo[items.IIndex].CrushVert=j:"D"==F&&(d.ItemInfo[items.IIndex].CrushD=j))):V+=O:"Y"==P&&(R=D>0?"Y":"N",V+=y=wpdSetFixed(O-O*(D/100)),"Y"==i&&(d.ItemInfo[items.IIndex].W=y,"W"==F?d.ItemInfo[items.IIndex].CrushHoriz=D:"H"==F?d.ItemInfo[items.IIndex].CrushVert=D:"D"==F&&(d.ItemInfo[items.IIndex].CrushD=D)))}else V+=wpdSetFixed(items.W);d.HorizGap>0&&(V+=items.SpreadItem)}if(partShelf.AvlSpace-V>=0){S=j,(j>0||"Y"==R)&&(_="Y",-1!==t&&-1!==x.indexOf(t)&&"Y"==i&&(d.ItemInfo[t].WChanged="Y"));break}}if("N"==_){var b=0;if(S>0)for(const e of x)"N"==W[b]&&(d.ItemInfo[x[b]].W=Y[b],d.ItemInfo[x[b]].CrushHoriz=crush_horiz_arr[b]),b++;"Y"!==g&&(g_error_category="W",n="N")}else g_error_category="",n="Y",g="Y"}0}return n}catch(e){error_handling(e)}}