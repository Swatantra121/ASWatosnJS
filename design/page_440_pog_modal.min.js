var oldBnrTxt,g_fixtureW,g_fixtureH,g_fixtureD,l_poginfo=[],g_templ_info_success=get_message("POGCR_SAVE_MSG"),g_innerDimension=[];function calculateFixtureDimensions(_=-1){try{var e=":"+$v("P440_FIXTURE_CODE_TML")+":",a=$v("P440_FIXTURE_CODE_TML").split(":").length,[P,t,T]=$v("P440_POGCR_POG_FIXR_THRESHOLD").split(":").map(Number);apex.server.process("GET_DIMENSION_JSON",{x01:e,x02:a,x03:P,x04:t,x05:T},{dataType:"text",success:function(e){if(""!==$.trim(e)){if(g_innerDimension=JSON.parse($.trim(e)),-1!==_)for(var a=1;a<_;a++)g_innerDimension.push(g_innerDimension[0]);g_fixtureW=g_innerDimension.reduce(((_,e)=>_+e.InnerWidth),0),g_fixtureH=g_innerDimension.reduce(((_,e)=>Math.max(_,e.InnerHeight)),-1/0),g_fixtureD=g_innerDimension.reduce(((_,e)=>Math.max(_,e.InnerDepth)),-1/0),g_fixtureW/=10,g_fixtureH/=10,g_fixtureD/=10,apex.item("P440_POG_WIDTH").setValue(g_fixtureW),apex.item("P440_POG_BASE_WIDTH").setValue(g_fixtureW),apex.item("P440_POG_HEIGHT").setValue(g_fixtureH),apex.item("P440_POG_DEPTH").setValue(g_fixtureD),apex.item("P440_POG_SEGMENT_WIDTH").setValue(parseFloat((g_fixtureW/g_innerDimension.length).toFixed(2)))}}})}catch(_){error_handling(_)}}function setFields(){try{if("Y"==$v("P440_FLEX_TEXT_1_REQ")&&$("#P440_COL_FLEX_TEXT_1_CONTAINER").addClass("is-required"),"Y"==$v("P440_FLEX_TEXT_2_REQ")&&$("#P440_COL_FLEX_TEXT_2_CONTAINER").addClass("is-required"),"Y"==$v("P440_FLEX_TEXT_3_REQ")&&$("#P440_COL_FLEX_TEXT_3_CONTAINER").addClass("is-required"),"Y"==$v("P440_FLEX_TEXT_4_REQ")&&$("#P440_COL_FLEX_TEXT_4_CONTAINER").addClass("is-required"),0==l_poginfo.length){if($("#SR_BASIC_INFO_tab a").trigger("click"),$("#DELETE_POG").css("display","none"),$s("P440_POG_CODE",""),$s("P440_POG_VERSION",""),$s("P440_POG_NAME",""),$s("P440_POG_TYPE",""),$s("P440_POG_HEIGHT",0),$s("P440_POG_SEGMENT_WIDTH",0),$s("P440_POG_WIDTH",0),$s("P440_POG_DEPTH",0),$s("P440_BACK_DEPTH",1),$s("P440_TRAFFIC_FLOW","LR"),$s("P440_POG_BASE_HEIGHT",0),$s("P440_POG_BASE_WIDTH",0),$s("P440_POG_BASE_DEPTH",0),$s("P440_POG_NOTCH_WIDTH",0),$s("P440_POG_NOTCH_START",0),$s("P440_POG_NOTCH_SPACING",0),$s("P440_POG_COLOR","#A69FA6"),$s("P440_HORZ_START",0),$s("P440_HORZ_SPACING",0),$s("P440_POG_VERT_START",0),$s("P440_POG_VERT_SPACING",0),document.getElementById("P440_ALLOW_OVER_Y").removeAttribute("checked"),$("#P440_ALLOW_OVER_N").attr("checked","checked"),$s("P440_SPECIAL_TYPE",""),$s("P440_SPECIAL_TYPE_DESC",""),$s("P440_DISPLAY_METERAGE",""),$s("P440_RPT_METERAGE",""),"Y"===$v("P440_POG_EFFECTIVE_START_DATE_UPD")&&"Y"===$v("P440_POG_EFF_START_DATE_UPDATE")){let _=moment($v("P440_VDATE"),"YYYYMMDD").add(1,"day").format(get_js_date_format());apex.item("P440_EFF_START_DATE").setValue(_)}else $s("P440_EFF_START_DATE",moment($v("P440_VDATE"),"YYYYMMDD").format(get_js_date_format()));$s("P440_BRAND_GROUP_ID",""),$s("P440_REMARKS",""),$s("P440_STORE_SEGMENT",""),$s("P440_STORE_SEGMENT_TML",""),$s("P440_DESC_7",""),$s("P440_POG_DIVISION",""),$s("P440_FIXTURE_GENERATION",""),$s("P440_FIXTURE_GENERATION_TML",""),$s("P440_FIXTURE_COUNT_TML",""),$s("P440_COL_FLEX_LOV_1",""),$s("P440_COL_FLEX_LOV_2",""),$s("P440_COL_FLEX_LOV_3",""),$s("P440_COL_FLEX_LOV_4",""),$s("P440_COL_FLEX_LOV_5",""),$s("P440_COL_FLEX_LOV_6",""),$s("P440_PROMOTION_START_DATE",""),$s("P440_PROMOTION_END_DATE",""),$s("P440_PROMOTION_NAME",""),$s("P440_PDF_TEMPLATE",""),$s("P440_FIXTURE_GROUP",""),$s("P440_STORE_FORMAT",""),$s("P440_COMPARE_POG_VERSION","")}else if("Y"==$v("P440_MULTI_EDIT"))$("#CUSTOM_COLOR_POG").css("display","none"),$("#P440_POG_CODE").addClass("apex_disabled"),$("#P440_POG_VERSION").addClass("apex_disabled"),$("#P440_POG_NAME").addClass("apex_disabled"),$("#P440_POG_TYPE").addClass("apex_disabled"),$("#P440_POG_WIDTH").addClass("apex_disabled"),$("#P440_POG_DEPTH").addClass("apex_disabled"),$("#P440_BACK_DEPTH").addClass("apex_disabled"),$("#P440_POG_SEGMENT_WIDTH").addClass("apex_disabled"),$("#P440_TRAFFIC_FLOW").addClass("apex_disabled"),$("#P440_POG_BASE_HEIGHT").addClass("apex_disabled"),$("#P440_POG_BASE_WIDTH").addClass("apex_disabled"),$("#P440_POG_BASE_DEPTH").addClass("apex_disabled"),$("#P440_POG_NOTCH_WIDTH").addClass("apex_disabled"),$("#P440_POG_NOTCH_START").addClass("apex_disabled"),$("#P440_POG_NOTCH_SPACING").addClass("apex_disabled"),$("#P440_POG_COLOR_CONTAINER").addClass("apex_disabled"),$("#P440_HORZ_START").addClass("apex_disabled"),$("#P440_HORZ_SPACING").addClass("apex_disabled"),$("#P440_POG_VERT_START").addClass("apex_disabled"),$("#P440_POG_VERT_SPACING").addClass("apex_disabled"),$("#P440_ALLOW_OVER").addClass("apex_disabled"),$("#P440_SPECIAL_TYPE").addClass("apex_disabled"),$("#P440_SPECIAL_TYPE_DESC").addClass("apex_disabled"),$("#P440_DISPLAY_METERAGE").addClass("apex_disabled"),$("#P440_RPT_METERAGE").addClass("apex_disabled"),$("#P440_EFF_START_DATE").addClass("apex_disabled"),$("#P440_BRAND_GROUP_ID").addClass("apex_disabled"),$("#P440_REMARKS").addClass("apex_disabled"),$("#P440_STORE_SEGMENT").addClass("apex_disabled"),$("#P440_STORE_SEGMENT_TML").addClass("apex_disabled"),$("#P440_DESC_7").addClass("apex_disabled"),$("#P440_AREA").addClass("apex_disabled"),$("#P440_PLN_DEPT").addClass("apex_disabled"),$("#P440_POG_HEIGHT").addClass("apex_disabled"),$("#P440_POG_SUBDEPT").addClass("apex_disabled"),$("#P440_POG_DEPT").addClass("apex_disabled"),$("#P440_POG_DIVISION").addClass("apex_disabled"),$("#P440_FIXTURE_GENERATION").addClass("apex_disabled"),$("#P440_FIXTURE_FAMILY_CONTAINER").addClass("apex_disabled"),$("#P440_FIXTURE_TYPE_CONTAINER").addClass("apex_disabled"),$("#P440_FIXTURE_CODE_CONTAINER").addClass("apex_disabled"),$("#P440_FIXTURE_FAMILY_CONTAINER_TML").addClass("apex_disabled"),$("#P440_FIXTURE_TYPE_CONTAINER_TML").addClass("apex_disabled"),$("#P440_FIXTURE_CODE_CONTAINER_TML").addClass("apex_disabled"),$("#P440_FIXTURE_COUNT_TML_CONTAINER").addClass("apex_disabled"),$("#P440_EFF_START_DATE").addClass("apex_disabled"),$("#P440_PROMOTION_START_DATE").addClass("apex_disabled"),$("#P440_PROMOTION_END_DATE").addClass("apex_disabled"),$("#P440_PROMOTION_NAME").addClass("apex_disabled"),$("#P440_PDF_TEMPLATE").addClass("apex_disabled"),$("#P440_FIXTURE_GROUP").addClass("apex_disabled"),$("#P440_STORE_FORMAT").addClass("apex_disabled"),$("#P440_COMPARE_POG_VERSION").addClass("apex_disabled"),apex.item("P440_POG_CODE").setValue(""),apex.item("P440_POG_VERSION").setValue(""),apex.item("P440_POG_NAME").setValue("Mixed"),apex.item("P440_POG_TYPE").setValue("Mixed"),apex.item("P440_POG_WIDTH").setValue(0),apex.item("P440_POG_DEPTH").setValue(0),apex.item("P440_BACK_DEPTH").setValue(0),apex.item("P440_POG_SEGMENT_WIDTH").setValue(0),apex.item("P440_TRAFFIC_FLOW").setValue(""),apex.item("P440_POG_BASE_HEIGHT").setValue(0),apex.item("P440_POG_BASE_WIDTH").setValue(0),apex.item("P440_POG_BASE_DEPTH").setValue(0),apex.item("P440_POG_NOTCH_WIDTH").setValue(0),apex.item("P440_POG_NOTCH_START").setValue(0),apex.item("P440_POG_NOTCH_SPACING").setValue(0),apex.item("P440_POG_COLOR").setValue(""),apex.item("P440_HORZ_START").setValue(""),apex.item("P440_HORZ_SPACING").setValue(""),apex.item("P440_POG_VERT_START").setValue(""),apex.item("P440_POG_VERT_SPACING").setValue(""),document.getElementById("P440_ALLOW_OVER_Y").removeAttribute("checked"),$("#P440_ALLOW_OVER_N").attr("checked","checked"),apex.item("P440_SPECIAL_TYPE").setValue(""),apex.item("P440_SPECIAL_TYPE_DESC").setValue(""),apex.item("P440_DISPLAY_METERAGE").setValue(""),apex.item("P440_RPT_METERAGE").setValue(""),apex.item("P440_EFF_START_DATE").setValue(""),apex.item("P440_BRAND_GROUP_ID").setValue(""),apex.item("P440_REMARKS").setValue(""),apex.item("P440_STORE_SEGMENT").setValue(""),apex.item("P440_STORE_SEGMENT_TML").setValue(""),apex.item("P440_DESC_7").setValue(""),apex.item("P440_AREA").setValue(""),apex.item("P440_PLN_DEPT").setValue(""),apex.item("P440_POG_HEIGHT").setValue(0),apex.item("P440_POG_SUBDEPT").setValue(""),apex.item("P440_POG_DEPT").setValue(""),apex.item("P440_POG_DIVISION").setValue(""),apex.item("P440_FIXTURE_GENERATION").setValue(""),apex.item("P440_FIXTURE_FAMILY").setValue(""),apex.item("P440_FIXTURE_TYPE").setValue(""),apex.item("P440_FIXTURE_CODE").setValue(""),apex.item("P440_FIXTURE_GENERATION_TML").setValue(""),apex.item("P440_FIXTURE_FAMILY_TML").setValue(""),apex.item("P440_FIXTURE_TYPE_TML").setValue(""),apex.item("P440_FIXTURE_CODE_TML").setValue(""),apex.item("P440_FIXTURE_COUNT_TML").setValue(""),apex.item("P440_PROMOTION_START_DATE").setValue(""),apex.item("P440_PROMOTION_END_DATE").setValue(""),apex.item("P440_PROMOTION_NAME").setValue(""),apex.item("P440_PDF_TEMPLATE").setValue(""),apex.item("P440_FIXTURE_GROUP").setValue(""),apex.item("P440_STORE_FORMAT").setValue(""),apex.item("P440_COMPARE_POG_VERSION").setValue("");else{if($("#CUSTOM_COLOR_POG").css("display","block"),apex.item("P440_POG_CODE").setValue(l_poginfo[0].POGCode),apex.item("P440_POG_VERSION").setValue(l_poginfo[0].Version),apex.item("P440_POG_NAME").setValue(l_poginfo[0].Name),apex.item("P440_POG_TYPE").setValue(l_poginfo[0].Type),apex.item("P440_POG_WIDTH").setValue(l_poginfo[0].PogWidth),apex.item("P440_POG_DEPTH").setValue(l_poginfo[0].PogDepth),apex.item("P440_BACK_DEPTH").setValue(l_poginfo[0].BackDepth),apex.item("P440_POG_SEGMENT_WIDTH").setValue(l_poginfo[0].PogSegmentWidth),apex.item("P440_TRAFFIC_FLOW").setValue(l_poginfo[0].TrafficFlow),apex.item("P440_POG_BASE_HEIGHT").setValue(l_poginfo[0].BaseH),apex.item("P440_POG_BASE_WIDTH").setValue(l_poginfo[0].BaseW),apex.item("P440_POG_BASE_DEPTH").setValue(l_poginfo[0].BaseD),apex.item("P440_POG_NOTCH_WIDTH").setValue(l_poginfo[0].NotchW),apex.item("P440_POG_NOTCH_START").setValue(l_poginfo[0].NotchStart),apex.item("P440_POG_NOTCH_SPACING").setValue(l_poginfo[0].NotchSpacing),apex.item("P440_POG_COLOR").setValue(l_poginfo[0].Color),apex.item("P440_HORZ_START").setValue(l_poginfo[0].HorzStart),apex.item("P440_HORZ_SPACING").setValue(l_poginfo[0].HorzSpacing),apex.item("P440_POG_VERT_START").setValue(l_poginfo[0].VertStart),apex.item("P440_POG_VERT_SPACING").setValue(l_poginfo[0].VertSpacing),"Y"==l_poginfo[0].AllowOverlap?(document.getElementById("P440_ALLOW_OVER_N").removeAttribute("checked"),$("#P440_ALLOW_OVER_Y").attr("checked","checked")):(document.getElementById("P440_ALLOW_OVER_Y").removeAttribute("checked"),$("#P440_ALLOW_OVER_N").attr("checked","checked")),$.event.trigger("set_overlap"),apex.item("P440_SPECIAL_TYPE").setValue(l_poginfo[0].SpecialType),apex.item("P440_SPECIAL_TYPE_DESC").setValue(l_poginfo[0].SpecialTypeDesc),apex.item("P440_DISPLAY_METERAGE").setValue(l_poginfo[0].DisplayMeterage),apex.item("P440_RPT_METERAGE").setValue(l_poginfo[0].RPTMeterage),"Y"===$v("P440_POG_EFFECTIVE_START_DATE_UPD")&&"Y"===$v("P440_POG_EFF_START_DATE_UPDATE")){let _,e=moment($v("P440_VDATE"),"YYYYMMDD"),a=moment(l_poginfo[0].EffStartDate,"YYYYMMDD");_=a.isAfter(e)?a.format(get_js_date_format()):e.add(1,"day").format(get_js_date_format()),apex.item("P440_EFF_START_DATE").setValue(_)}else apex.item("P440_EFF_START_DATE").setValue(moment(l_poginfo[0].EffStartDate,"YYYYMMDD").format(get_js_date_format()));apex.item("P440_BRAND_GROUP_ID").setValue(l_poginfo[0].BrandGroupID),apex.item("P440_REMARKS").setValue(l_poginfo[0].Remarks),"Y"==$v("P440_NEW_TEMPLATE")?apex.item("P440_STORE_SEGMENT_TML").setValue(l_poginfo[0].StoreSegment):apex.item("P440_STORE_SEGMENT").setValue(l_poginfo[0].StoreSegment),apex.item("P440_DESC_7").setValue(l_poginfo[0].Desc7),apex.item("P440_AREA").setValue(l_poginfo[0].Area),apex.item("P440_PLN_DEPT").setValue(l_poginfo[0].PLNDept),apex.item("P440_POG_HEIGHT").setValue(l_poginfo[0].PogHeight),"Y"==$v("P440_NEW_TEMPLATE")?(apex.item("P440_FIXTURE_GENERATION_TML").setValue(l_poginfo[0].FixtureGeneration),void 0!==l_poginfo[0].FixtureFamily&&(apex.item("P440_FIXTURE_FAMILY_TML").setValue(l_poginfo[0].FixtureFamily),$("#P440_FIXTURE_FAMILY_TML").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label")),void 0!==l_poginfo[0].FixtureType&&null!==l_poginfo[0].FixtureType&&(apex.item("P440_FIXTURE_TYPE_TML").setValue(l_poginfo[0].FixtureType+"-"+l_poginfo[0].FixtureTypeDesc),$("#P440_FIXTURE_TYPE_TML").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label")),void 0!==l_poginfo[0].FixtureType&&null!==l_poginfo[0].FixtureType&&(apex.item("P440_FIXTURE_CODE_TML").setValue(l_poginfo[0].FixtureCodes),$("#P440_FIXTURE_CODE_TML").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label")),void 0!==l_poginfo[0].FixtureCount&&null!==l_poginfo[0].FixtureCount&&(apex.item("P440_FIXTURE_COUNT_TML").setValue(l_poginfo[0].FixtureCount),$("#P440_FIXTURE_COUNT_TML").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label"))):(apex.item("P440_FIXTURE_GENERATION").setValue(l_poginfo[0].FixtureGeneration),void 0!==l_poginfo[0].FixtureFamily&&(apex.item("P440_FIXTURE_FAMILY").setValue(l_poginfo[0].FixtureFamily),$("#P440_FIXTURE_FAMILY").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label")),void 0!==l_poginfo[0].FixtureType&&null!==l_poginfo[0].FixtureType&&(apex.item("P440_FIXTURE_TYPE").setValue(l_poginfo[0].FixtureType+"-"+l_poginfo[0].FixtureTypeDesc),$("#P440_FIXTURE_TYPE").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label")),void 0!==l_poginfo[0].FixtureType&&null!==l_poginfo[0].FixtureType&&(apex.item("P440_FIXTURE_CODE").setValue(l_poginfo[0].FixtureCodes),$("#P440_FIXTURE_CODE").closest(".t-Form-fieldContainer--floatingLabel").addClass("is_active js-show-label"))),apex.item("P440_COL_FLEX_TEXT_1").setValue(l_poginfo[0].Flex_Text_1),apex.item("P440_COL_FLEX_TEXT_2").setValue(l_poginfo[0].Flex_Text_2),apex.item("P440_COL_FLEX_TEXT_3").setValue(l_poginfo[0].Flex_Text_3),apex.item("P440_COL_FLEX_TEXT_4").setValue(l_poginfo[0].Flex_Text_4),apex.item("P440_COL_FLEX_LOV_1").setValue(l_poginfo[0].Flex_Lov_1),apex.item("P440_COL_FLEX_LOV_2").setValue(l_poginfo[0].Flex_Lov_2),apex.item("P440_COL_FLEX_LOV_3").setValue(l_poginfo[0].Flex_Lov_3),apex.item("P440_COL_FLEX_LOV_4").setValue(l_poginfo[0].Flex_Lov_4),apex.item("P440_COL_FLEX_LOV_5").setValue(l_poginfo[0].Flex_Lov_5),apex.item("P440_COL_FLEX_LOV_6").setValue(l_poginfo[0].Flex_Lov_6),apex.item("P440_CATEGORY").setValue(l_poginfo[0].Category),apex.item("P440_SUB_CATEOGORY").setValue(l_poginfo[0].SubCategory),""!==l_poginfo[0].PromStartDt&&null!==l_poginfo[0].PromStartDt&&void 0!==l_poginfo[0].PromStartDt&&apex.item("P440_PROMOTION_START_DATE").setValue(moment(l_poginfo[0].PromStartDt,"YYYYMMDD").format(get_js_date_format())),""!==l_poginfo[0].PromEndDt&&null!==l_poginfo[0].PromEndDt&&void 0!==l_poginfo[0].PromEndDt&&apex.item("P440_PROMOTION_END_DATE").setValue(moment(l_poginfo[0].PromEndDt,"YYYYMMDD").format(get_js_date_format())),apex.item("P440_PROMOTION_NAME").setValue(l_poginfo[0].PromName),apex.item("P440_PDF_TEMPLATE").setValue(l_poginfo[0].PDFTemplateName),apex.item("P440_COMPARE_POG_VERSION").setValue(l_poginfo[0].ComparePogVersion),apex.item("P440_FIXTURE_GROUP").setValue(l_poginfo[0].Flex_Text_15),apex.item("P440_STORE_FORMAT").setValue(l_poginfo[0].StoreFormat),"Y"==$v("P440_PDF_TEMPLATE_INFO_MNG")&&(apex.item("P440_POG_CODES").setValue(l_poginfo[0].pog_codes),apex.item("P440_BNR_TXT_ID").setValue(l_poginfo[0].Flex_Text_11),apex.item("P440_BNR_IMG_ID").setValue(l_poginfo[0].Flex_Text_12),apex.item("P440_INS_IMG_ID").setValue(l_poginfo[0].Flex_Text_13),void 0!==l_poginfo[0].Flex_Text_11&&""!==l_poginfo[0].Flex_Text_11&&apex.server.process("GET_BANNER_TEXT",{x01:l_poginfo[0].Flex_Text_11},{dataType:"text",success:function(_){apex.item("P440_BNR_TXT").setValue(_),oldBnrTxt=$v("P440_BNR_TXT")}}),$s("P440_BNR_TXT_UPD_IND","N"),apex.region("banner_img").refresh(),apex.region("instruction_img").refresh())}apex.item("P440_POG_NAME").setFocus(),$("body").on("keydown",(function(_){13==_.keyCode&&($(_.target).parents("#P440_BNR_TXT_CONTAINER").length>0||$(_.target).parents("#banner_img").length>0||$(_.target).parents("#instruction_img").length>0||"banner_img_sort_widget_search_field"==$(_.target).attr("id")||"instruction_img_sort_widget_search_field"==$(_.target).attr("id")||(_.preventDefault(),$("#CREATE_POG").click()))})),"Y"==$v("P440_NEW_TEMPLATE")&&($("#P440_POG_CODE_CONTAINER .t-Form-itemRequired-marker, #P440_POG_DIVISION_CONTAINER .t-Form-itemRequired-marker, #P440_POG_DEPT_CONTAINER .t-Form-itemRequired-marker, #P440_POG_SUBDEPT_CONTAINER .t-Form-itemRequired-marker, #P440_POG_TYPE_CONTAINER .t-Form-itemRequired-marker").remove(),$("#P440_POG_NAME_CONTAINER").parent().hide())}catch(_){error_handling(_)}}function updateFields(){try{var _=[],e={};if(e.POGCode=$v("P440_POG_CODE"),e.Name=$v("P440_POG_NAME"),e.Type=$v("P440_POG_TYPE"),e.PogHeight=$v("P440_POG_HEIGHT"),e.PogSegmentWidth=$v("P440_POG_SEGMENT_WIDTH"),e.PogWidth=$v("P440_POG_WIDTH"),e.BackDepth=$v("P440_BACK_DEPTH"),e.PogDepth=$v("P440_POG_DEPTH"),e.TrafficFlow=$v("P440_TRAFFIC_FLOW"),e.BaseH=$v("P440_POG_BASE_HEIGHT"),e.BaseW=$v("P440_POG_BASE_WIDTH"),e.BaseD=$v("P440_POG_BASE_DEPTH"),e.NotchW=$v("P440_POG_NOTCH_WIDTH"),e.NotchStart=$v("P440_POG_NOTCH_START"),e.NotchSpacing=$v("P440_POG_NOTCH_SPACING"),e.Color=$v("P440_POG_COLOR"),e.HorzStart=$v("P440_HORZ_START"),e.HorzSpacing=$v("P440_HORZ_SPACING"),e.VertStart=$v("P440_POG_VERT_START"),e.VertSpacing=$v("P440_POG_VERT_SPACING"),console.log("setting allowoverlap",$v("P440_ALLOW_OVER")),e.AllowOverlap=$v("P440_ALLOW_OVER"),e.SpecialType=$v("P440_SPECIAL_TYPE"),e.SpecialTypeDesc=$v("P440_SPECIAL_TYPE_DESC"),e.DisplayMeterage=$v("P440_DISPLAY_METERAGE"),console.log("display meterate",$v("P440_DISPLAY_METERAGE")),e.RPTMeterage=$v("P440_RPT_METERAGE"),""!==$v("P440_EFF_START_DATE")?e.EffStartDate=moment($v("P440_EFF_START_DATE"),get_js_date_format()).format("YYYYMMDD"):e.EffStartDate="",e.BrandGroupID=$v("P440_BRAND_GROUP_ID"),e.Remarks=$v("P440_REMARKS"),e.StoreSegment="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_STORE_SEGMENT_TML"):$v("P440_STORE_SEGMENT"),e.Desc7=$v("P440_DESC_7"),e.Flex_Text_1=$v("P440_COL_FLEX_TEXT_1"),e.Flex_Text_2=$v("P440_COL_FLEX_TEXT_2"),e.Flex_Text_3=$v("P440_COL_FLEX_TEXT_3"),e.Flex_Text_4=$v("P440_COL_FLEX_TEXT_4"),e.Area=$v("P440_AREA"),e.PLNDept=$v("P440_PLN_DEPT"),e.Division=$v("P440_POG_DIVISION"),e.SubDept=$v("P440_POG_SUBDEPT"),e.Dept=$v("P440_POG_DEPT"),e.FixtureFamily="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_FAMILY_TML"):$v("P440_FIXTURE_FAMILY"),e.FixtureFamilyHidden="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_FAMILY_TML"):$v("P440_FIXTURE_FAMILY"),e.FixtureType="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_TYPE_TML"):$v("P440_FIXTURE_TYPE"),e.FixtureCodes="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_CODE_TML"):$v("P440_FIXTURE_CODE"),e.FixtureCount="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_COUNT_TML"):"","Y"!==$v("P440_NEW_TEMPLATE")&&$("#P440_FIXTURE_TYPE").val()||"Y"==$v("P440_NEW_TEMPLATE")&&$("#P440_FIXTURE_TYPE_TML").val()?e.FixtureTypeDesc="Y"==$v("P440_NEW_TEMPLATE")?$("#P440_FIXTURE_TYPE_TML").val().toString().split("-")[1].trim():$("#P440_FIXTURE_TYPE").val().toString().split("-")[1].trim():e.FixtureTypeDesc="",e.FixtureGeneration="Y"==$v("P440_NEW_TEMPLATE")?$v("P440_FIXTURE_GENERATION_TML"):$v("P440_FIXTURE_GENERATION"),e.Flex_Lov_1=$v("P440_COL_FLEX_LOV_1"),e.Flex_Lov_2=$v("P440_COL_FLEX_LOV_2"),e.Flex_Lov_3=$v("P440_COL_FLEX_LOV_3"),e.Flex_Lov_4=$v("P440_COL_FLEX_LOV_4"),e.Flex_Lov_5=$v("P440_COL_FLEX_LOV_5"),e.Flex_Lov_6=$v("P440_COL_FLEX_LOV_6"),"Y"==g_fileUploadFlag?e.fileUPloadedFlag="Y":e.fileUPloadedFlag="N",e.POGCode=$v("P440_POG_CODE"),console.log("P440_CATEGORY",$v("P440_CATEGORY"),$v("P440_SUB_CATEGORY")),e.Category=$v("P440_CATEGORY"),e.SubCategory=$v("P440_SUB_CATEGORY"),""!==$v("P440_PROMOTION_START_DATE")?e.PromStartDt=moment($v("P440_PROMOTION_START_DATE"),get_js_date_format()).format("YYYYMMDD"):e.PromStartDt="",""!==$v("P440_PROMOTION_END_DATE")?e.PromEndDt=moment($v("P440_PROMOTION_END_DATE"),get_js_date_format()).format("YYYYMMDD"):e.PromEndDt="",e.PromName=$v("P440_PROMOTION_NAME"),e.PDFTemplateName=$v("P440_PDF_TEMPLATE"),e.Flex_Text_15=$v("P440_FIXTURE_GROUP"),e.StoreFormat=$v("P440_STORE_FORMAT"),e.ComparePogVersion=$v("P440_COMPARE_POG_VERSION"),e.pog_recreate=$v("P440_POG_RECREATE"),"Y"==$v("P440_MULTI_EDIT")?e.MultiEdit="Y":e.MultiEdit="N","Y"==$v("P440_PDF_TEMPLATE_INFO_MNG")){var a=[],P=[];$(".banner_img_chkbx:checked").each((function(){a.push($(this).attr("key-id"))})),$(".ins_img_chkbx:checked").each((function(){P.push($(this).attr("key-id"))})),e.Flex_Text_11=$v("P440_BNR_TXT_ID"),e.Flex_Text_12=a[0],e.Flex_Text_13=P[0]}_.push(e),"Y"==$v("P440_NEW_TEMPLATE")?sessionStorage.setItem("isPOGTemplate","Y"):sessionStorage.setItem("isPOGTemplate","N");var t=nvl($v("P440_FIXTURE_COUNT_TML"));if(1==g_innerDimension.length)for(var T=1;T<t;T++)g_innerDimension.push(g_innerDimension[0]);sessionStorage.setItem("fixtureDimension",JSON.stringify(g_innerDimension)),sessionStorage.setItem("openpogjson",JSON.stringify(_)),apex.submit("CREATE_POG")}catch(_){error_handling(_)}}function validatePogFields(){try{var _,e=$v("P440_POG_EDIT_IND");void 0!==l_poginfo&&l_poginfo.length>0?(_=l_poginfo[0].POGCode,e="Y",l_poginfo[0].BaseWidth===parseFloat($v("P440_POG_BASE_WIDTH"))/100&&l_poginfo[0].BaseH===parseFloat($v("P440_POG_BASE_HEIGHT"))/100||"Y"):(l_poginfo=[],e="N"),apex.server.process("POG_CODE_DUP_CHECK",{x01:$v("P440_POG_CODE")},{dataType:"text",async:!0,success:function(a){""!=$.trim(a)&&("Y"==$.trim(a)&&"N"==e&&"N"==$v("P440_POGCR_SAVE_DUP_POG_ID")||"Y"==e&&"Y"==$.trim(a)&&void 0!==_&&_!==$v("P440_POG_CODE")&&"N"==$v("P440_POGCR_SAVE_DUP_POG_ID")?alert(get_message("POG_CODE_DUP_CHECK")):"Y"==$.trim(a)&&"N"==e&&"Y"==$v("P440_POGCR_SAVE_DUP_POG_ID")||"Y"==e&&"Y"==$.trim(a)&&void 0!==_&&_!==$v("P440_POG_CODE")&&"Y"==$v("P440_POGCR_SAVE_DUP_POG_ID")?confirm(get_message("POGCR_SAVE_ON_DUP_POGID"),get_message("SHCT_YES"),get_message("SHCT_NO"),(function(){parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100>parseFloat($v("P440_POG_WIDTH"))/100?alert(get_message("SEGMENT_WIDTH_GREATER")):$v("P440_POG_CODE").length>parseInt($v("P440_MAX_POG_CODE_LENGTH"))?alert(get_message("MAX_POG_CODE_LENGTH",$v("P440_MAX_POG_CODE_LENGTH"))):"Y"===$v("P440_NEW_TEMPLATE")||""!=$v("P440_POG_CODE")&&""!=$v("P440_POG_DIVISION")&&""!=$v("P440_POG_DEPT")&&""!=$v("P440_POG_TYPE")&&""!=$v("P440_POG_WIDTH")&&""!=$v("P440_POG_HEIGHT")&&""!=$v("P440_POG_DEPTH")&&""!=$v("P440_BACK_DEPTH")&&""!=$v("P440_POG_SEGMENT_WIDTH")&&""!=$v("P440_POG_SUBDEPT")&&""!=$v("P440_POG_CODE")&&""!=$v("P440_POG_COLOR")?parseFloat($v("P440_HORZ_START"))/100>=parseFloat($v("P440_POG_WIDTH"))/100-parseFloat($v("P440_POG_NOTCH_WIDTH"))/100*2?alert(get_message("HORZ_START_LESS_THAN_WIDTH")):parseFloat($v("P440_POG_VERT_START"))/100>parseFloat($v("P440_POG_HEIGHT"))/100?alert(get_message("VERT_START_LESS_THAN_HEIGHT")):0==$v("P440_POG_HEIGHT")?alert(get_message("HEIGHT_GRT_THAN_ZERO")):0==$v("P440_POG_WIDTH")?alert(get_message("WIDTH_GRT_THAN_ZERO")):0==$v("P440_POG_DEPTH")?alert(get_message("DEPTH_GRT_THAN_ZERO")):0==$v("P440_BACK_DEPTH")?alert(get_message("BACK_DEPTH_GRT_THAN_ZERO")):$v("P440_BACK_DEPTH")<1?alert(get_message("BACK_DEPTH_NOT_LESS_THAN_ONE")):"Y"===$v("P25_POG_EFFECTIVE_START_DATE_UPD")&&""!==$v("P440_EFF_START_DATE")&&new Date($v("P440_EFF_START_DATE")).getTime()<new Date($.trim(get_global_ind_values("AI_APPLICATION_DATE"))).getTime()?alert(get_message("EFF_DATE_LESS_THAN_VDATE")):0==parseFloat($v("P440_POG_SEGMENT_WIDTH"))?alert(get_message("SEGMENT_WIDTH_GRT_ZERO")):parseFloat($v("P440_POG_NOTCH_WIDTH"))/100>0&&0==parseFloat($v("P440_POG_NOTCH_SPACING"))?alert(get_message("NOTCH_SPACE_NEEDED")):parseFloat($v("P440_POG_BASE_HEIGHT"))>0&&0==parseFloat($v("P440_POG_BASE_WIDTH"))?alert(get_message("BASE_WDT_GRT_ZERO")):parseFloat($v("P440_POG_BASE_WIDTH"))>0&&0==parseFloat($v("P440_POG_BASE_HEIGHT"))?alert(get_message("BASE_HGT_GRT_ZERO")):(parseFloat($v("P440_POG_BASE_WIDTH"))>0||parseFloat($v("P440_POG_BASE_HEIGHT"))>0)&&0==parseFloat($v("P440_POG_BASE_DEPTH"))?alert(get_message("BASE_DEPT_GRT_ZERO")):parseFloat($v("P440_POG_BASE_HEIGHT"))>0&&parseFloat($v("P440_POG_BASE_HEIGHT"))>parseFloat($v("P440_POG_HEIGHT"))?alert(get_message("BASE_HGT_GRT_POG_HGT")):""!==$v("P440_FLEX_TEXT_1")&&"Y"==$v("P440_FLEX_TEXT_1_REQ")&&""==$v("P440_COL_FLEX_TEXT_1")||""!==$v("P440_FLEX_TEXT_2")&&"Y"==$v("P440_FLEX_TEXT_2_REQ")&&""==$v("P440_COL_FLEX_TEXT_2")||""!==$v("P440_FLEX_TEXT_3")&&"Y"==$v("P440_FLEX_TEXT_3_REQ")&&""==$v("P440_COL_FLEX_TEXT_3")||""!==$v("P440_FLEX_TEXT_4")&&"Y"==$v("P440_FLEX_TEXT_4_REQ")&&""==$v("P440_COL_FLEX_TEXT_4")?alert(get_message("ENTER_MANDATORY_FIELDS")):parseFloat($v("P440_POG_HEIGHT"))/100<l_poginfo.PogHeight||parseFloat($v("P440_POG_WIDTH"))/100<l_poginfo.PogWidth||parseFloat($v("P440_POG_DEPTH"))/100<l_poginfo.PogDepth||parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100<l_poginfo.PogSegmentWidth?alert(get_message("POGCR_DECR_DIMN_NOTALLOW")):g_innerDimension.length>0&&"Y"==$v("P440_NEW_TEMPLATE")&&(parseFloat($v("P440_POG_HEIGHT"))>g_fixtureH||parseFloat($v("P440_POG_WIDTH"))>g_fixtureW||parseFloat($v("P440_POG_DEPTH"))>g_fixtureD)?alert(get_message("FIXTURE_DIMN_WARNING")):("Y"==e?(parseFloat(l_poginfo[0].W)/100!=parseFloat($v("P440_POG_WIDTH"))/100||parseFloat(l_poginfo[0].H)/100!=parseFloat($v("P440_POG_HEIGHT"))/100||parseFloat(l_poginfo[0].SegmentW)/100!=parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100||l_poginfo[0].Color.toUpperCase()!==$v("P440_POG_COLOR").toUpperCase()||parseFloat(l_poginfo[0].NotchW)/100!=parseFloat($v("P440_POG_NOTCH_WIDTH"))/100||parseFloat(l_poginfo[0].NotchStart)/100!=parseFloat($v("P440_POG_NOTCH_START"))/100||parseFloat(l_poginfo[0].NotchSpacing)/100!=parseFloat($v("P440_POG_NOTCH_SPACING"))/100||parseFloat(l_poginfo[0].HorzStart)/100!=parseFloat($v("P440_HORZ_START"))/100||parseFloat(l_poginfo[0].HorzSpacing)/100!=parseFloat($v("P440_HORZ_SPACING"))/100||parseFloat(l_poginfo[0].VertStart)/100!=parseFloat($v("P440_POG_VERT_START"))/100||parseFloat(l_poginfo[0].VertSpacing)/100!=parseFloat($v("P440_POG_VERT_SPACING"))/100?(void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="Y"),apex.item("P440_POG_RECREATE").setValue("Y")):void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="N"),l_poginfo[0].SubDept!==$v("P440_POG_SUBDEPT")&&$.each(l_poginfo[0].ModuleInfo,(function(_,e){null!=e.ParentModule&&"undefined"!=e.ParentModule||(l_poginfo[0].ModuleInfo[_].SubDept=$v("P440_POG_SUBDEPT"))}))):(void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="Y"),apex.item("P440_POG_RECREATE").setValue("Y")),updateFields()):alert(get_message("ENTER_MANDATORY_FIELDS"))})):parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100>parseFloat($v("P440_POG_WIDTH"))/100?alert(get_message("SEGMENT_WIDTH_GREATER")):$v("P440_POG_CODE").length>parseInt($v("P440_MAX_POG_CODE_LENGTH"))?alert(get_message("MAX_POG_CODE_LENGTH",$v("P440_MAX_POG_CODE_LENGTH"))):"Y"===$v("P440_NEW_TEMPLATE")||""!=$v("P440_POG_CODE")&&""!=$v("P440_POG_DIVISION")&&""!=$v("P440_POG_DEPT")&&""!=$v("P440_POG_TYPE")&&""!=$v("P440_POG_WIDTH")&&""!=$v("P440_POG_HEIGHT")&&""!=$v("P440_POG_DEPTH")&&""!=$v("P440_BACK_DEPTH")&&""!=$v("P440_POG_SEGMENT_WIDTH")&&""!=$v("P440_POG_SUBDEPT")&&""!=$v("P440_POG_CODE")&&""!=$v("P440_POG_COLOR")?parseFloat($v("P440_HORZ_START"))/100>=parseFloat($v("P440_POG_WIDTH"))/100-parseFloat($v("P440_POG_NOTCH_WIDTH"))/100*2?alert(get_message("HORZ_START_LESS_THAN_WIDTH")):parseFloat($v("P440_POG_VERT_START"))/100>parseFloat($v("P440_POG_HEIGHT"))/100?alert(get_message("VERT_START_LESS_THAN_HEIGHT")):0==$v("P440_POG_HEIGHT")?alert(get_message("HEIGHT_GRT_THAN_ZERO")):0==$v("P440_POG_WIDTH")?alert(get_message("WIDTH_GRT_THAN_ZERO")):0==$v("P440_POG_DEPTH")?alert(get_message("DEPTH_GRT_THAN_ZERO")):0==$v("P440_BACK_DEPTH")?alert(get_message("BACK_DEPTH_GRT_THAN_ZERO")):$v("P440_BACK_DEPTH")<1?alert(get_message("BACK_DEPTH_NOT_LESS_THAN_ONE")):"Y"===$v("P25_POG_EFFECTIVE_START_DATE_UPD")&&""!==$v("P440_EFF_START_DATE")&&new Date($v("P440_EFF_START_DATE")).getTime()<new Date($.trim(get_global_ind_values("AI_APPLICATION_DATE"))).getTime()?alert(get_message("EFF_DATE_LESS_THAN_VDATE")):0==parseFloat($v("P440_POG_SEGMENT_WIDTH"))?alert(get_message("SEGMENT_WIDTH_GRT_ZERO")):parseFloat($v("P440_POG_NOTCH_WIDTH"))/100>0&&0==parseFloat($v("P440_POG_NOTCH_SPACING"))?alert(get_message("NOTCH_SPACE_NEEDED")):parseFloat($v("P440_POG_BASE_HEIGHT"))>0&&0==parseFloat($v("P440_POG_BASE_WIDTH"))?alert(get_message("BASE_WDT_GRT_ZERO")):parseFloat($v("P440_POG_BASE_WIDTH"))>0&&0==parseFloat($v("P440_POG_BASE_HEIGHT"))?alert(get_message("BASE_HGT_GRT_ZERO")):(parseFloat($v("P440_POG_BASE_WIDTH"))>0||parseFloat($v("P440_POG_BASE_HEIGHT"))>0)&&0==parseFloat($v("P440_POG_BASE_DEPTH"))?alert(get_message("BASE_DEPT_GRT_ZERO")):parseFloat($v("P440_POG_BASE_HEIGHT"))>0&&parseFloat($v("P440_POG_BASE_HEIGHT"))>parseFloat($v("P440_POG_HEIGHT"))?alert(get_message("BASE_HGT_GRT_POG_HGT")):""!==$v("P440_FLEX_TEXT_1")&&"Y"==$v("P440_FLEX_TEXT_1_REQ")&&""==$v("P440_COL_FLEX_TEXT_1")||""!==$v("P440_FLEX_TEXT_2")&&"Y"==$v("P440_FLEX_TEXT_2_REQ")&&""==$v("P440_COL_FLEX_TEXT_2")||""!==$v("P440_FLEX_TEXT_3")&&"Y"==$v("P440_FLEX_TEXT_3_REQ")&&""==$v("P440_COL_FLEX_TEXT_3")||""!==$v("P440_FLEX_TEXT_4")&&"Y"==$v("P440_FLEX_TEXT_4_REQ")&&""==$v("P440_COL_FLEX_TEXT_4")?alert(get_message("ENTER_MANDATORY_FIELDS")):parseFloat($v("P440_POG_HEIGHT"))/100<l_poginfo.PogHeight||parseFloat($v("P440_POG_WIDTH"))/100<l_poginfo.PogWidth||parseFloat($v("P440_POG_DEPTH"))/100<l_poginfo.PogDepth||parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100<l_poginfo.PogSegmentWidth?alert("Decreasing dimensions are not allowed"):("Y"==e?(parseFloat(l_poginfo[0].W)/100!=parseFloat($v("P440_POG_WIDTH"))/100||parseFloat(l_poginfo[0].H)/100!=parseFloat($v("P440_POG_HEIGHT"))/100||parseFloat(l_poginfo[0].SegmentW)/100!=parseFloat($v("P440_POG_SEGMENT_WIDTH"))/100||l_poginfo[0].Color.toUpperCase()!==$v("P440_POG_COLOR").toUpperCase()||parseFloat(l_poginfo[0].NotchW)/100!=parseFloat($v("P440_POG_NOTCH_WIDTH"))/100||parseFloat(l_poginfo[0].NotchStart)/100!=parseFloat($v("P440_POG_NOTCH_START"))/100||parseFloat(l_poginfo[0].NotchSpacing)/100!=parseFloat($v("P440_POG_NOTCH_SPACING"))/100||parseFloat(l_poginfo[0].HorzStart)/100!=parseFloat($v("P440_HORZ_START"))/100||parseFloat(l_poginfo[0].HorzSpacing)/100!=parseFloat($v("P440_HORZ_SPACING"))/100||parseFloat(l_poginfo[0].VertStart)/100!=parseFloat($v("P440_POG_VERT_START"))/100||parseFloat(l_poginfo[0].VertSpacing)/100!=parseFloat($v("P440_POG_VERT_SPACING"))/100?(void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="Y"),apex.item("P440_POG_RECREATE").setValue("Y")):void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="N"),l_poginfo[0].SubDept!==$v("P440_POG_SUBDEPT")&&$.each(l_poginfo[0].ModuleInfo,(function(_,e){null!=e.ParentModule&&"undefined"!=e.ParentModule||(l_poginfo[0].ModuleInfo[_].SubDept=$v("P440_POG_SUBDEPT"))}))):(void 0!==l_poginfo[0]&&(l_poginfo[0].pog_recreate="Y"),apex.item("P440_POG_RECREATE").setValue("Y")),updateFields()):alert(get_message("ENTER_MANDATORY_FIELDS")))},loadingIndicatorPosition:"page"})}catch(_){error_handling(_)}}async function uploadFile(_){logDebug("function : uploadFile; pFileIndex : "+_,"S");try{var e=document.getElementById("P440_UPLOAD_PDF"),a=(document.getElementById("P440_UPLOAD_PDF").innerHTML,0),P=e.files[a],t=(validate_file_type(P.name),new FileReader);validate_file_type(P.name)&&(t.onload=(T=P,function(_){if(T){var t=binaryArray2base64(_.target.result),E=[];E=clob2Array(t,3e4,E),apex.server.process("UPLOAD_FILE",{x01:P.name,x02:P.type,f01:E},{dataType:"json",success:function(_){"success"==_.result?++a<e.files.length?uploadFile(a):(e.value="",$s("P440_FILE_NAME",P.name),upload_file_flag="Y",logDebug("function : uploadFile","E")):alert(get_message("INTERNAL_ERROR"))},loadingIndicatorPosition:"page"})}}),t.readAsArrayBuffer(P))}catch{error_handling(err)}var T}function validate_file_type(_){logDebug("function : validate_file_type","S");return/(\.pdf|\.xlsx|\.zip)$/i.exec(_)?(logDebug("function : validate_file_type","E"),!0):(alert(get_message("INVALID_FILE_TYPE",_)),!1)}l_poginfo=null!==sessionStorage.getItem("openpogjson")?JSON.parse(sessionStorage.getItem("openpogjson")):[],null!==sessionStorage.getItem("openpogjson")&&apex.item("P440_MULTI_EDIT").setValue(l_poginfo[0].MultiEdit),sessionStorage.removeItem("openpogjson"),sessionStorage.removeItem("fixtureDimension"),sessionStorage.removeItem("isPOGTemplate");