function enable_fetch_all(){$(".a-IG-gridView").find(".a-GV-hdr").find(".a-GV-header.a-GV-selHeader").on("click",(function(){var e=$(this).closest(".t-IRR-region").attr("id");apex.region(e).widget().interactiveGrid("getViews","grid").model.getTotalRecords()<5e3&&apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("option","persistSelection")&&apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("fetchAllData")}))}function enable_only_row_selector(e){let t=apex.region(e).widget().interactiveGrid("getViews").grid.view$.grid("instance");!function(){const e=t._select;t._select=function(...t){const i=t[0],a=t[3];return(i&&i.hasClass("a-GV-selHeader")||!(i&&0!==i.length||!1!==a))&&e.apply(this,t)}}()}function resetDefaultToggleState(e,t){t!=$("#"+e+"_ig_toolbar_toggle_filter_data").parent().children("label").hasClass("is-active")&&$("#"+e+"_ig_toolbar_toggle_filter_data").click()}function add_error(e,t,i,a,o,r,n,c){var d={type:"error",location:"page"};d.message=n,d.regionStaticId=t,d.recordId=i,d.columnName=o,d.unsafe=!1,c.push(d),e.setValidity("error",a,r,n)}function invokeIGSave(e,t,i){apex.message.clearErrors(),apex.region(e).widget().interactiveGrid("getViews").grid.model.isChanged()?apex.region(e).widget().interactiveGrid("getViews").grid.model.save().done((function(){apex.message.showPageSuccess(apex.lang.getMessage("APEX.IG.CHANGES_SAVED")),"function"==typeof t&&t()})).fail((function(e){apex.message.showErrors(e),"function"==typeof i&&i()})):"function"==typeof t&&t()}function hideshowIGColumns(e,t){$.each(t,(function(i,a){apex.region(e).widget().interactiveGrid("getViews").grid.curInst.options.columns[0][t[i].pColumn].hidden=t[i].pFlag})),apex.region(e).widget().interactiveGrid("getViews").grid.curInst._refreshGrid()}function init_ig(e,t=!0,i="P0_SELECTED_RECORDS"){var a=apex.jQuery.apex.interactiveGrid.copyDefaultToolbar(),o=a.toolbarFind("actions1");return void 0!==e.features&&void 0!==e.features.download&&-1!==jQuery.inArray("XLSX",e.features.download.formats)&&(o.controls.push({type:"BUTTON",action:"export_custom",hot:!0,iconBeforeLabel:!0}),a.toolbarRemove("show-download-dialog")),a.toolbarFind("actions2").controls.shift(),e.toolbarData=a,e.defaultGridViewOptions={selectionStateItem:i,persistSelection:t},e}function add_buttons_inside_ig(config,buttonsJSON){var ig_regionStaticId=config.regionStaticId,ig_regionId=config.regionStaticId,toolbarData=config.toolbarData;return buttonsJSON.length>0&&$.each(buttonsJSON.reverse(),(function(e,t){var i=toolbarData.toolbarFind(t.action_group);"BUTTON"==t.type?i.controls.unshift({type:"BUTTON",action:t.action,hot:t.hot,iconBeforeLabel:t.iconBeforeLabel}):"RADIO_GROUP"==t.type?i.controls.unshift({type:"RADIO_GROUP",id:t.id,action:t.action,hot:t.hot}):"TOGGLE"==t.type?i.controls.unshift({type:"TOGGLE",id:t.id,action:t.action,choices:t.choices}):"MENU"==t.type?i.controls.unshift({type:"MENU",id:t.id,hot:t.hot,iconBeforeLabel:t.iconBeforeLabel,labelKey:t.label,menu:JSON.parse(t.choices)}):i.controls.unshift({type:"SELECT",id:t.id,action:t.action})})),config.toolbarData=toolbarData,config.initActions=function(actions){void 0!==config.features&&void 0!==config.features.download&&-1!==jQuery.inArray("XLSX",config.features.download.formats)&&actions.add({name:"export_custom",label:get_message("IG_BTN_DOWNLOAD"),icon:"fa fa-download",action:function(e,t){$.event.trigger("EXPORT_CUSTOM_XLSX",{regionId:config.regionId,regionStaticId:config.regionStaticId,baseReport:"N"})}}),buttonsJSON.length>0&&$.each(buttonsJSON,(function(key,value){if("TOGGLE"==value.type){var p_label="",p_state=!1,p_choices=JSON.parse(value.choices);p_choices.forEach((function(e,t){if(e.default)return p_label=e.label,p_state=e.value,!1})),""==p_label&&(p_label=value.label),actions.add({name:value.action,label:p_label,state:p_state,get:function(){return this.state},set:function(v){this.state=v;var p_label=this.label,choices=eval("value.choices");""!=choices&&(JSON.parse(choices).forEach((function(e,t){if(e.value==v)return p_label=e.label,""!==e.style&&(""!=ig_regionStaticId?$("#"+ig_regionStaticId+"_ig_toolbar_"+value.id).parent().children("label").attr("style",e.style):$("#R"+ig_regionId+"_ig_toolbar_"+value.id).parent().children("label").attr("style",e.style)),!1})),this.label=p_label)}})}else if("MENU"==value.type){var p_choices=JSON.parse(value.choices);$.each(p_choices.items,(function(e,t){actions.add({name:t.action,label:t.label,icon:t.icon,action:function(e,i){$.event.trigger(t.action)}})}))}else if("SELECT"==value.type)actions.add({name:value.action,choices:JSON.parse(value.choices),action:function(e,t){$.event.trigger(value.event)}});else if("RADIO_GROUP"==value.type)actions.add({name:value.action,choices:JSON.parse(value.choices),action:function(e,t){""!=value.redirect_static_id&&$s(value.redirect_static_id,t.value),""!=value.event&&$.event.trigger(value.event)}}),""!=value.redirect_static_id&&($("#"+value.redirect_static_id).change((function(e){""!=ig_regionStaticId?($("input:radio[name="+ig_regionStaticId+"_ig_toolbar_"+value.action+"][value="+$v(value.redirect_static_id)+"]").prop("checked",!0),apex.region(ig_regionStaticId).refresh()):($("input:radio[name=R"+ig_regionId+"_ig_toolbar_"+value.action+"][value="+$v(value.redirect_static_id)+"]").prop("checked",!0),apex.region("R"+ig_regionId).refresh())})),$("#"+value.redirect_static_id).ready((function(){""!=ig_regionStaticId?$("input:radio[name="+ig_regionStaticId+"_ig_toolbar_"+value.action+"][value="+$v(value.redirect_static_id)+"]").prop("checked",!0):$("input:radio[name=R"+ig_regionId+"_ig_toolbar_"+value.action+"][value="+$v(value.redirect_static_id)+"]").prop("checked",!0)})));else if(void 0===value.redirect_static_id||""==value.redirect_static_id)actions.add({name:value.action,label:value.label,icon:value.icon,action:function(e,t){$.event.trigger(value.event)}});else{var static_id="#"+value.redirect_static_id;actions.add({name:value.action,label:value.label,icon:value.icon,action:function(e,t){$(static_id).trigger("click")}})}}))},config}function add_filter_toggle(e,t,i){var a,o=get_message("IG_BTN_SELECT_ALL"),r='[{"label":"'+o+'","style":"font-weight: bold;" , "value":true';return t&&(a=o,r+=',"default":true'),r=r+'},{"label":"'+o+'","style":" " , "value":false',t||(a=o,r+=',"default":true'),add_button_to_json(e,"toggle_data",a,"","","","","","TOGGLE","toggle_filter_data",r+="}]",i),e}function add_button_to_json(e,t,i,a,o,r,n,c,d,s,l,g){console.log(i,c);var u={};return u.action=t,u.label=i,u.hot=a,u.iconBeforeLabel=o,u.icon=r,u.event=n,u.redirect_static_id=c,u.id=s,u.choices=l,u.type=void 0!==d&&""!==d?d:"BUTTON",u.action_group=void 0!==g&&""!==g?g:"actions4",e.push(u),e}var deferredObj;function loadBatchOfRecords(e){apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("nextPage");let t=setInterval((()=>function(e,t){if(apex.region(e).call("getViews").grid.view$.data("apex-grid").onLastPage)return clearInterval(t),apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("selectAll"),apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("firstPage"),removeLoadingIndicator(regionloadWait),deferredObj.resolve(),deferredObj.promise();null==apex.region(e).call("getViews").grid.view$.data("apex-grid").scrollPageTimer&&(clearInterval(t),loadBatchOfRecords(e))}(e,t)),10)}function loadAllRecords(e,t,i){if(deferredObj=$.Deferred(),addLoadingIndicator(),apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("firstPage"),apex.region(e).widget().interactiveGrid("getViews").grid){apex.region(e).widget().interactiveGrid("getViews").grid.model._haveAllData||apex.region(e).widget().interactiveGrid("getViews").grid.model.fetchAll((function(){}));let a=setInterval((()=>function(e,a){if(apex.region(e).widget().interactiveGrid("getViews").grid.model._haveAllData){if(clearInterval(a),!t)return removeLoadingIndicator(regionloadWait),deferredObj.resolve(),"function"==typeof i&&i(),deferredObj.promise();apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("firstPage"),loadBatchOfRecords(e)}}(e,a)),10)}}function SelecttoJSON(e){var t=apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("getSelectedRecords"),i={};$.each(apex.region(e).widget().interactiveGrid("getViews").grid.modelColumns,(function(t,a){$.each(this,(function(a,o){"index"==a&&apex.region(e).widget().interactiveGrid("getViews").grid.model.isIdentityField(t)&&(i[t]=o)}))})),$.each(apex.region(e).widget().interactiveGrid("getViews").grid.getColumns(),(function(t,a){void 0!==a.index&&(!a.readonly&&void 0!==a.readonly||apex.region(e).widget().interactiveGrid("getViews").grid.model.isIdentityField(a.index)||0===a.index)&&(i[a.property]=a.index)}));var a=[];return $.each(t,(function(e,t){var o={};$.each(t,(function(e,t){$.each(i,(function(i,a){e==a&&(o[i]="object"==typeof t?t.v:t)}))})),a.push(o)})),JSON.stringify(a)}function SelecttoCollection(e){addLoadingIndicator();var t=SelecttoJSON(e);apex.server.process("AX_SELECT_TO_COLLECTION",{x01:e,p_clob_01:t},{dataType:"text",success:function(e){""!=$.trim(e)?(removeLoadingIndicator(regionloadWait),apex.message.clearErrors(),apex.message.showErrors([{type:"error",location:"page",message:e}])):removeLoadingIndicator(regionloadWait)}})}function add_xlsx_only_ig(e){return void 0!==e.features&&void 0!==e.features.download&&-1!==jQuery.inArray("XLSX",e.features.download.formats)&&(e.initActions=function(t){t.add({name:"export_custom",label:get_message("IG_BTN_DOWNLOAD"),icon:"fa fa-download",action:function(t,i){$.event.trigger("EXPORT_CUSTOM_XLSX",{regionId:e.regionId,regionStaticId:e.regionStaticId,baseReport:"N"})}})}),e}function addIGFilter(e,t,i,a,o){apex.region(e).widget().interactiveGrid("addFilter",{type:"column",columnType:"column",columnName:t.toUpperCase(),operator:i,value:a,isCaseSensitive:o})}function deleteIGFilter(e){$.each(apex.region(e).widget().interactiveGrid("getFilters"),(function(t,i){apex.region(e).widget().interactiveGrid("deleteFilter",$(this)[0].id)}))}function ig_row_exists(e){var t=apex.region(e).widget().interactiveGrid("getViews","grid").model,i=0,a=t.getTotalRecords(),o=0;return t.forEach((function(e){i+=1})),t.forEach((function(e,i,a){t.getRecordMetadata(a).deleted&&(o+=1)})),o=a-o,0!=i&&0!=o}function ig_fetch_row_count(e){var t=apex.region(e).widget().interactiveGrid("getViews","grid").model,i=t.getTotalRecords(),a=0;return t.forEach((function(e){1})),t.forEach((function(e,i,o){t.getRecordMetadata(o).deleted&&(a+=1)})),i-a}function ig_load_add_submit(e,t,i){var a,o=e.length;(a=$.Deferred()).resolve(),e.forEach((function(e,r,n){a.promise().done((function(){a=$.Deferred();var r=e.static_id,n=e.checked,c=e.checkChanged,d=e.columnName,s=e.columnValue;loadAllRecords(r,n),deferredObj.promise().done((function(){model=apex.region(r).widget().interactiveGrid("getViews","grid").model,("Y"==c&&model.isChanged()||"N"==c)&&model.forEach((function(e,t,i){model.getRecordMetadata(i).deleted||model.setValue(e,d,s)})),o-=1,""!=t&&0==o&&apex.submit({request:t,showWait:i}),a.resolve()}))}))}))}function add_records(e,t,i,a,o,r){var n={};return n.static_id=t,n.checked=i,n.checkChanged=a,n.columnName=o,n.columnValue=r,e.push(n),e}function customChecked(e,t){$(e.triggeringElement).hasClass("fa-check-square-o")?($(e.triggeringElement).removeClass("fa-check-square-o").addClass("fa-square-o"),$("span.select_all").removeClass("fa-check-square-o").addClass("fa-square-o")):$(e.triggeringElement).removeClass("fa-square-o").addClass("fa-check-square-o"),"function"==typeof t&&t()}function customPagination(e,t){$("#"+e+"_ig_grid_vc .a-GV-bdy table tbody").find("tr span.fa-check-square-o."+t).length>0?$("#"+e+"_ig_grid_vc_status").html(apex.lang.formatMessage("APEX.GV.SELECTION_COUNT",$("#"+e+"_ig_grid_vc .a-GV-bdy table tbody").find("tr span.fa-check-square-o."+t).length)):$("#"+e+"_ig_grid_vc_status").html("")}function ig_checkAllRecords(e,t,i,a,o){a?(loadAllRecords(i,!0),deferredObj.promise().done((function(){$(e).hasClass("fa-square-o")?($(e).removeClass("fa-square-o").addClass("fa-check-square-o"),$(".fa-square-o."+t).not(".apex_disabled").removeClass("fa-square-o").addClass("fa-check-square-o")):($(e).removeClass("fa-check-square-o").addClass("fa-square-o"),$(".fa-check-square-o."+t).not(".apex_disabled").removeClass("fa-check-square-o").addClass("fa-square-o")),o&&customPagination(i,t)}))):($(e).hasClass("fa-square-o")?($(e).removeClass("fa-square-o").addClass("fa-check-square-o"),$(".fa-square-o."+t).not(".apex_disabled").removeClass("fa-square-o").addClass("fa-check-square-o")):($(e).removeClass("fa-check-square-o").addClass("fa-square-o"),$(".fa-check-square-o."+t).not(".apex_disabled").removeClass("fa-check-square-o").addClass("fa-square-o")),o&&customPagination(i,t))}function downloadBaseReport(e){$.event.trigger("EXPORT_CUSTOM_XLSX",{regionId:apex.region(e).call("getViews").grid.model.getOption("regionId"),regionStaticId:e,baseReport:"Y"})}function checkIGChanged(e,t,i,a){var o;apex.region(e).widget().interactiveGrid("getViews").grid.model.isChanged()?(o=void 0!==a?a:get_message("WARN_FOR_UNSAVED_CHANGES"),confirm(o,get_message("CONFIRM_BUTTON_OK_TEXT"),get_message("CONFIRM_BUTTON_CANCEL_TEXT"),(function(){"function"==typeof t&&t()}),(function(){"function"==typeof i&&i()}))):"function"==typeof t&&t()}function AutofreezeIG(){$("[class*=asw_autofreeze-]").each((function(){var e,t=$(this).attr("id"),i=apex.region(t).call("getViews").grid.getColumns(),a=parseInt($(this).attr("class").match(/asw_autofreeze-(\d+)/)[1]),o=$("#"+t+"_ig_content_container").width(),r=0,n=0;for(e=0;e<i.length;e++)i[e].hidden||(i[e].frozen&&(r+=i[e].curWidth),n+=i[e].curWidth);if(apex.debug.info("GridWidth",o),apex.debug.info("TotalFreezeWidth",r),apex.debug.info("TotalcolWidth",n),apex.debug.info("FreezeRaito",a),o<n){var c=0;for(e=0;e<i.length;e++)i[e].hidden||((c+=i[e].curWidth)>o*a/100?i[e].frozen&&(i[e].frozen=!1,apex.debug.info("Unfreeze",i[e].property)):i[e].frozen||(i[e].frozen=!0,apex.debug.info("Freeze",i[e].property)));apex.region(t).call("getCurrentView").view$.grid("refreshColumns").grid("refresh")}}))}function set_filter_criteria(e,t){apex.debug.log("Adding Filter Criteria for Search Region "+e+" Report Region "+t);var i,a="",o="";$("#"+e).find("input[type=text],textarea,select,input[type=checkbox]").each((function(){i="","SELECT"==$(this).prop("nodeName")?(a="#"+$(this).attr("id"),"select-multiple"==$(this).prop("type")?($(a+" option:selected").each((function(){i=i+","+$(this).text()})),i=i.substr(1,i.length-1)):""!=$(a+" option:selected").val()&&(i=$(a+" option:selected").text())):"checkbox"==$(this).attr("type")?(a="#"+$(this).attr("id").replace("_0",""),i=$(a+"_0").prop("checked")?'<input type="checkbox" disabled checked>':'<input type="checkbox" disabled>'):(a="#"+$(this).attr("id"),i=this.value),""!=i&&(o=o+" <b>"+$.trim($(a+"_LABEL").clone().children().remove().end().text())+" : </b>"+i)})),""!=o&&(o='<b style="color:#0000FF;">'+apex.lang.getMessage("ACTIVE_FILTER_TEXT")+":</b> "+o),$("#"+t+"_filter_criteria").html(o)}async function setSelectedRecordIG(e){var t,i=apex.region(e).widget().interactiveGrid("getViews","grid").view$.grid("option","selectionStateItem"),a=$v(i).split(":");await loadAllRecordsIG(e);try{t=a.map((function(e){return JSON.parse(e)}))}catch(e){t=a}var o=[],r=apex.region(e).widget().interactiveGrid("getViews","grid").model;t.forEach((function(e){o.push(r.getRecord(e))})),r.clearSelection(),apex.region(e).widget().interactiveGrid("getViews").grid.view$.grid("setSelectedRecords",o,!1),t.forEach((function(e){var t=r.getRecord(e);if(t){var i=r.getRecordId(t);r.setSelectionState(i,!0,"set")}}))}function loadAllRecordsIG(e){return new Promise((function(t,i){try{var a=apex.region(e).widget().interactiveGrid("getViews","grid"),o=a.model;a.view$.grid("firstPage"),o.fetchAll((function(e){e.done&&t()}))}catch(e){i(e)}}))}